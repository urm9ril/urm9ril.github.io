<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>ios集成cordova自定义插件以及在vue中的使用. | ooops的小站</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="开始前, 先吐槽一波, 这段话后面的”,”后面的空格看见了么, 这是ES6的语法, 折磨我半天.开始前,先吐槽一波,这段话后面的”,”后面的空格看见了么,这是ES6的语法,折磨我半天.没有对比就没有伤害, 心在滴血😂N 年不用的js,差一点 就 LFAT, 我的元旦三天假…😂">
<meta property="og:type" content="article">
<meta property="og:title" content="ios集成cordova自定义插件以及在vue中的使用.">
<meta property="og:url" content="http://example.com/2018/01/04/vue-cordova-oc/index.html">
<meta property="og:site_name" content="ooops的小站">
<meta property="og:description" content="开始前, 先吐槽一波, 这段话后面的”,”后面的空格看见了么, 这是ES6的语法, 折磨我半天.开始前,先吐槽一波,这段话后面的”,”后面的空格看见了么,这是ES6的语法,折磨我半天.没有对比就没有伤害, 心在滴血😂N 年不用的js,差一点 就 LFAT, 我的元旦三天假…😂">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2018-01-04T13:15:20.000Z">
<meta property="article:modified_time" content="2023-09-01T10:14:13.343Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="cordova">
<meta property="article:tag" content="vue">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="ooops的小站" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">ooops的小站</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-vue-cordova-oc" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/01/04/vue-cordova-oc/" class="article-date">
  <time class="dt-published" datetime="2018-01-04T13:15:20.000Z" itemprop="datePublished">2018-01-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      ios集成cordova自定义插件以及在vue中的使用.
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h5 id="开始前-先吐槽一波-这段话后面的”-”后面的空格看见了么-这是ES6的语法-折磨我半天"><a href="#开始前-先吐槽一波-这段话后面的”-”后面的空格看见了么-这是ES6的语法-折磨我半天" class="headerlink" title="开始前, 先吐槽一波, 这段话后面的”,”后面的空格看见了么, 这是ES6的语法, 折磨我半天."></a>开始前, 先吐槽一波, 这段话后面的”,”后面的空格看见了么, 这是ES6的语法, 折磨我半天.</h5><h5 id="开始前-先吐槽一波-这段话后面的”-”后面的空格看见了么-这是ES6的语法-折磨我半天-1"><a href="#开始前-先吐槽一波-这段话后面的”-”后面的空格看见了么-这是ES6的语法-折磨我半天-1" class="headerlink" title="开始前,先吐槽一波,这段话后面的”,”后面的空格看见了么,这是ES6的语法,折磨我半天."></a>开始前,先吐槽一波,这段话后面的”,”后面的空格看见了么,这是ES6的语法,折磨我半天.</h5><h2 id="没有对比就没有伤害-心在滴血😂"><a href="#没有对比就没有伤害-心在滴血😂" class="headerlink" title="没有对比就没有伤害, 心在滴血😂"></a>没有对比就没有伤害, 心在滴血😂</h2><h2 id="N-年不用的js-差一点-就-LFAT-我的元旦三天假…😂"><a href="#N-年不用的js-差一点-就-LFAT-我的元旦三天假…😂" class="headerlink" title="N 年不用的js,差一点 就 LFAT, 我的元旦三天假…😂"></a>N 年不用的js,差一点 就 LFAT, 我的元旦三天假…😂</h2><span id="more"></span>
<h6 id="———————————-华丽丽的开始了-准备好你们的道具-————————————"><a href="#———————————-华丽丽的开始了-准备好你们的道具-————————————" class="headerlink" title="——————————— 华丽丽的开始了,准备好你们的道具 ————————————"></a>——————————— 华丽丽的开始了,准备好你们的道具 ————————————</h6><p>##1.项目创建<br>基于 <code>webpack</code> 模板创建一个 <code>vue</code> 项目</p>
<p><code>cordova : cordova create hello com.example.hello HelloWord</code></p>
<ul>
<li>第一个参数 <code>hello</code> 表示在工程目录中创建一个 <code>hello</code> 的文件夹</li>
<li>第二个参数 <code>com.example.hello</code> 表示包名（反向域名），用于标志不同的 <code>app</code></li>
<li>第三个参数 <code>HelloWord</code>表示项目的名称，可以在 <code>config.xml</code> 文件中修改</li>
</ul>
<p>创建基于 <code>webpack</code> 模板的  <code>vue</code>  项目</p>
<p><code>vue : vue init webpack my-project</code></p>
<p>##2.添加cordova项目的平台支持</p>
<p>2.1 进入创建的项目目录<br><code>cd hello</code></p>
<p>2.2 查看已有的平台<br><code>cordova platforms list</code></p>
<p>2.3添加所需要的平台<br><code>cordova platform add android</code><br><code>cordova platform add ios</code></p>
<p>2.4如果想移除已经添加的平台的话<br><code>cordova platform remove android</code> or <code>cordova platform rm android</code></p>
<p>##3.pluman 的安装</p>
<p>3.1安装 <code>plugman</code><br><code>npm install -g plugman</code></p>
<p>3.2创建 <code>plugman</code> 插件 语法如下:<br><code>plugman create --name &lt;pluginName&gt; --plugin_id &lt;pluginID&gt; --plugin_version &lt;version&gt; [--path &lt;directory&gt;] [--variableNAME=VALUE]</code></p>
<p><code>egg : plugman create --name hello --plugin_id firstPlugin --plugin_version 0.0.1</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">参数:</span><br><span class="line">pluginName: 插件名字</span><br><span class="line">pluginID: 插件id, egg : coolPlugin </span><br><span class="line">oversion: 版本, egg : 0.0.1</span><br><span class="line">directory:一个绝对或相对路径的目录，该目录将创建插件项目</span><br><span class="line">variable NAME=VALUE: 额外的描述，如作者信息和相关描述</span><br></pre></td></tr></table></figure>

<p>回到 <code>cordova</code> 创建项目目录下 找到 <code>platforms</code> 下 的 <code>ios / android</code> </p>
<p>项目在 <code>plugin</code>  目录下 编写需要的 <code>native</code>文件 (<code>native</code> 文件也可以后面写) </p>
<p>将编写好的 <code>native</code> 插件 放入 <code>cordova</code> 插件下的 <code>src</code> 目录 </p>
<p>规范化的处理是 建立平台文件夹 放入 对应的平台文件夹中 这里 以 <code>iOS</code> 为例</p>
<p>检查 <code>plugin.xml</code> 配置文件相关节点的配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&#x27;1.0&#x27; encoding=&#x27;utf-8&#x27;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugin</span> <span class="attr">id</span>=<span class="string">&quot;firstPlugin&quot;</span> <span class="attr">version</span>=<span class="string">&quot;0.0.1&quot;</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://apache.org/cordova/ns/plugins/1.0&quot;</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">js-module</span> <span class="attr">name</span>=<span class="string">&quot;hello&quot;</span> <span class="attr">src</span>=<span class="string">&quot;www/hello.js&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;clobbers target=&quot;cordova.plugins.hello&quot; /&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">clobbers</span> <span class="attr">target</span>=<span class="string">&quot;navigator.hello&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">js-module</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">platform</span> <span class="attr">name</span>=<span class="string">&quot;ios&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">config-file</span> <span class="attr">target</span>=<span class="string">&quot;config.xml&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;/*&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">feature</span> <span class="attr">name</span>=<span class="string">&quot;HelloWord&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;ios-package&quot;</span> <span class="attr">value</span>=<span class="string">&quot;CDVHelloWord&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;onload&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">feature</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">config-file</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">header-file</span> <span class="attr">src</span>=<span class="string">&quot;src/ios/CDVHelloWord.h&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">source-file</span> <span class="attr">src</span>=<span class="string">&quot;src/ios/CDVHelloWord.m&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">platform</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这样创建的插件 是不能安装的 缺少 <code>package.json</code> 文件</p>
<p>执行 <code>plugman createpackagejson 插件目录</code> </p>
<p>生成 <code>package.json</code> 插件信息文件(terminal会让你输入一些东西) </p>
<p>如下: 前两行是创建插件的时候 自带的信息 没有发布到 <code>git</code> 所以可以没填</p>
<pre><code>name: (firstPlugin) 
version: (0.0.1) 

description: 测试插件
git repository: 
author: 348043793@qq.com
license: (ISC) MIT

插件添加正常 提示如下 :
name: (coolPlugin) 
version: (0.0.1) 
description: 测试插件
git repository: 
author: 348043793@qq.com
license: (ISC) MIT


About to write to /Users/ooops/Desktop/oc_vue/package.json:

&#123;
  &quot;name&quot;: &quot;coolPlugin&quot;,
  &quot;version&quot;: &quot;0.0.1&quot;,
  &quot;description&quot;: &quot;测试插件&quot;,
  &quot;cordova&quot;: &#123;
    &quot;id&quot;: &quot;coolPlugin&quot;,
    &quot;platforms&quot;: [
      &quot;ios&quot;
    ]
  &#125;,
  &quot;keywords&quot;: [
    &quot;ecosystem:cordova&quot;,
    &quot;cordova-ios&quot;
  ],
  &quot;author&quot;: &quot;348043793@qq.com&quot;,
  &quot;license&quot;: &quot;MIT&quot;
&#125;


Is this ok? (yes)
</code></pre>
<h2 id="编写插件代码"><a href="#编写插件代码" class="headerlink" title="编写插件代码"></a>编写插件代码</h2><p>这个根据业务 &#x2F; 逻辑 需要自行编写 (请自行使用 <code>百度</code> <code>google</code> 一下), 放出一个简单的示例</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> exec = <span class="built_in">require</span>(<span class="string">&#x27;cordova/exec&#x27;</span>); <span class="comment">// 固定格式</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> options = &#123;<span class="attr">quality</span>: <span class="string">&#x27;200&#x27;</span>&#125;;     <span class="comment">// 没什么卵用的参数</span></span><br><span class="line"><span class="comment">// exports.sayHi 扩展一个插件的方法</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">*   &lt;feature name=&quot;HelloWord&quot;&gt;</span></span><br><span class="line"><span class="comment">        &lt;param name=&quot;ios-package&quot; value=&quot;CDVHelloWord&quot;/&gt;</span></span><br><span class="line"><span class="comment">        &lt;param name=&quot;onload&quot; value=&quot;true&quot; /&gt;</span></span><br><span class="line"><span class="comment">    &lt;/feature&gt;</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">* exec(success, error, &#x27;HelloWord&#x27;, &#x27;sayHello&#x27;, [options]);</span></span><br><span class="line"><span class="comment">* success       成功回调,</span></span><br><span class="line"><span class="comment">* error         失败回调,</span></span><br><span class="line"><span class="comment">* HelloWord     上面 feature 中的 name,</span></span><br><span class="line"><span class="comment">* sayHello      CDVHelloWord(原生文件)中的函数名 / 方法名, 需要传递给原生的参数(字典 / 字典数组)  </span></span><br><span class="line"><span class="comment">* exec(success, error, &#x27;HelloWord&#x27;, &#x27;sayHello&#x27;, [options]);</span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"><span class="built_in">exports</span>.<span class="property">sayHi</span> = <span class="keyword">function</span> (<span class="params">options, success, error</span>) &#123;</span><br><span class="line">    <span class="title function_">exec</span>(success, error, <span class="string">&#x27;HelloWord&#x27;</span>, <span class="string">&#x27;sayHello&#x27;</span>, [options]);</span><br><span class="line">&#125;;                                  </span><br></pre></td></tr></table></figure>


<h2 id="安装编写的插件"><a href="#安装编写的插件" class="headerlink" title="安装编写的插件"></a>安装编写的插件</h2><p><code>cd</code> 插件目录   </p>
<p>执行 <code>pwd</code> 得到当前插件目录   <code>/Users/ooops/Desktop/plugins/hello</code></p>
<p><code>cd cordova</code> 项目目录</p>
<p>执行 <code>cordova plugin add 插件目录</code></p>
<pre><code>输出信息 如下 表示插件安装成功 :

Installing &quot;SimpleMath&quot; for android
Android Studio project detected
Installing &quot;SimpleMath&quot; for ios
Adding SimpleMath to package.json
Saved plugin info for &quot;SimpleMath&quot; to config.xml
</code></pre>
<h2 id="vue-cordova-插件的使用"><a href="#vue-cordova-插件的使用" class="headerlink" title="vue-cordova 插件的使用"></a>vue-cordova 插件的使用</h2><h3 id="在线安装-这个不做介绍了-坑了我两天"><a href="#在线安装-这个不做介绍了-坑了我两天" class="headerlink" title="在线安装 - 这个不做介绍了 坑了我两天"></a>在线安装 - 这个不做介绍了 坑了我两天</h3><h3 id="本地安装"><a href="#本地安装" class="headerlink" title="本地安装"></a>本地安装</h3><ul>
<li>为什么要本地安装？</li>
<li>现有的插件不够，如果要调用自己开发的插件，在线的不能用，只能将项目放在Vue项目中根据实际情况自 己添加插件</li>
</ul>
<p>如果已安装了 <code>vue-cordova</code> ,控制台执行 <code>npm uninstall vue-cordova</code> 删除掉</p>
<p>在 <code>github</code> 上 <code>clone</code> 下 <code>vue-cordova</code> 项目</p>
<pre><code>git clone https://github.com/kartsims/vue-cordova.git
</code></pre>
<p>在 <code>Vue</code> 项目的 <code>src</code> 目录下新建一个 <code>cordova</code> 目录</p>
<p>将下载的 <code>vue-cordova src</code>目录下的 <code>index.js</code> copy 到 <code>Vue</code> 项目新建的 <code>cordova</code> </p>
<p>目录下面，命名为 <code>cordova-plugin-index.js</code> ,不要使用 <code>index.js</code> ，否则会出现命名冲突</p>
<p><code>main.js</code> 的导包改成下面的样子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">VueCordova</span> <span class="keyword">from</span> <span class="string">&#x27;./cordova/cordova-plugin-index.js&#x27;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueCordova</span>)</span><br></pre></td></tr></table></figure>

<p><code>App.vue</code> 中 需要 </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br></pre></td></tr></table></figure>

<p>到这里 环境基本搞好了 </p>
<h2 id="如何安装本地插件"><a href="#如何安装本地插件" class="headerlink" title="如何安装本地插件"></a>如何安装本地插件</h2><p>在 <code>Vue</code> 项目文件的 <code>cordova</code> 目录下新建一个 <code>plugins</code> 目录</p>
<ul>
<li>在 <code>src/cordova/plugins/</code> 目录下新建 <code>cordova-plugin-sayhi.js</code> ,<br>按照 <code>camera</code> 插件仿造的一个 <code>js</code> 文件</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exports</span>.<span class="property">install</span> = <span class="keyword">function</span> (<span class="params">Vue, options, cb</span>) &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;deviceready&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> navigator.<span class="property">hello</span> === <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">cb</span>(<span class="literal">false</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 关键点</span></span><br><span class="line">    <span class="title class_">Vue</span>.<span class="property">cordova</span>.<span class="property">hello</span> = navigator.<span class="property">hello</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">cb</span>(<span class="literal">true</span>)</span><br><span class="line">  &#125;, <span class="literal">false</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>其中 <code>navigator.hello</code> 为 插件的 <code>config.xml</code> 中的 <code>&lt;clobbers target=&quot;navigator.hello&quot; /&gt;</code> 节点中的内容</p>
</li>
<li><p>将自定义的插件 添加到 <code>cordova-plugin-index.js</code> 中 如下位置</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> pluginsList = [</span><br><span class="line">  <span class="string">&#x27;cordova-plugin-sayhi&#x27;</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Vue</code> 中调用插件</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;click&quot;</span>&gt;</span>Add 1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span> <span class="comment">// 这个很重要, 否则会报 Vue is undefined</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;app&#x27;</span>,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="attr">click</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">window</span>.<span class="title function_">alert</span>(<span class="title class_">Vue</span>);</span><br><span class="line">      <span class="title class_">Vue</span>.<span class="property">cordova</span>.<span class="property">hello</span>.<span class="title function_">saiHi</span>(&#123;<span class="attr">quality</span>: <span class="string">&#x27;200&#x27;</span>&#125;, <span class="keyword">function</span> (<span class="params">success</span>) &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">alert</span>(success);</span><br><span class="line">      &#125;, <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">alert</span>(error)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>存在的问题</p>
<ul>
<li><p>上述解决方案 适用于 <code>vue</code> 整个项目打包 扔进 <code>app</code> 使用 <code>webpack</code> 打包 <code>app</code> </p>
</li>
<li><p>如果 <code>H5</code> 集成的过多 <code>app</code> 安装包势必会越来越大…….</p>
</li>
<li><p>请看下面的描述</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">猜想</span><br><span class="line"></span><br><span class="line">找不到插件, 插件是存在的,只是他找不到,</span><br><span class="line">调用插件是需要依赖库的,em 貌似很有道理</span><br><span class="line">插件需要依赖的文件,先导入看看.</span><br><span class="line"></span><br><span class="line"># 验证猜想 </span><br><span class="line"> </span><br><span class="line">尝试1 </span><br><span class="line">window.alert(Vue.cordova.plugins);</span><br><span class="line">在 index.html文件中手动加入 cordova.js</span><br><span class="line">打印 插件数组 ...............ok - ☺</span><br><span class="line">如何让他 找到这个插件....继续摸索</span><br><span class="line">糊里糊涂的  又引用了 exec.js 文件</span><br><span class="line"></span><br><span class="line">解决: </span><br><span class="line">打包整个项目放到服务器找不到插件 在index.html中 添加如下两个文件的引用</span><br><span class="line">&lt;script type=text/javascript src=cordova.js&gt;&lt;/script&gt;</span><br><span class="line">&lt;script type=text/javascript src=cordova-js-src/exec.js&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">// 这两句没什么卵用 - 有没有一样?</span><br><span class="line">&lt;script type=text/javascript src=cordova-js-src/platform.js&gt;&lt;/script&gt;</span><br><span class="line">&lt;script type=text/javascript src=cordova_plugins.js&gt;&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="至此-Vue-和-native-可以交互-至于姿势-自由选择-可以解锁"><a href="#至此-Vue-和-native-可以交互-至于姿势-自由选择-可以解锁" class="headerlink" title="至此 Vue 和 native 可以交互 - 至于姿势 自由选择 可以解锁"></a>至此 Vue 和 native 可以交互 - 至于姿势 自由选择 可以解锁</h2><h6 id="—————————————-就这么华丽丽的结束了-—————————————"><a href="#—————————————-就这么华丽丽的结束了-—————————————" class="headerlink" title="—————————————- 就这么华丽丽的结束了 —————————————-"></a>—————————————- 就这么华丽丽的结束了 —————————————-</h6><p>参考链接</p>
<p><a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/events.html" title="Vue Document">Vue Document</a>    </p>
<p><a target="_blank" rel="noopener" href="http://kartsims.github.io/vue-cordova/" title="vue-cordova Document">vue-cordova Document</a>     </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/01/04/vue-cordova-oc/" data-id="clm60q0xf000gdx91e1jq6kwn" data-title="ios集成cordova自定义插件以及在vue中的使用." class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cordova/" rel="tag">cordova</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue/" rel="tag">vue</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/01/27/CustomUILabel/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          自定义控件-UILabel
        
      </div>
    </a>
  
  
    <a href="/2017/12/18/OPAttributeString/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">OPAttributeString</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/cordova/" rel="tag">cordova</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/" rel="tag">vue</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/cordova/" style="font-size: 10px;">cordova</a> <a href="/tags/vue/" style="font-size: 10px;">vue</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/05/11/CTMediator/">CTMediator 组件完整性检查工具</a>
          </li>
        
          <li>
            <a href="/2019/11/13/CI_ENV/">(no title)</a>
          </li>
        
          <li>
            <a href="/2019/11/12/DataBase/">(no title)</a>
          </li>
        
          <li>
            <a href="/2019/11/12/H5/">(no title)</a>
          </li>
        
          <li>
            <a href="/2019/11/12/MySQL/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>