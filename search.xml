<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Cocoapodsç§æœ‰åº“åˆ¶ä½œ]]></title>
    <url>%2F2018%2F08%2F19%2FCocoapods-Private_Repo%2F</url>
    <content type="text"><![CDATA[1pod lib create you_lib_name]]></content>
      <categories>
        <category>Cocoapods</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS è‡ªå®šä¹‰æŽ§ä»¶-UILabel]]></title>
    <url>%2F2018%2F01%2F27%2Fcustom-uicontrol-uilabel%2F</url>
    <content type="text"><![CDATA[å¼€å‘ä¸­ç»å¸¸ä¼šé‡åˆ° è¿™æ ·çš„ç•Œé¢,å½“ç„¶ä½ å¯ä»¥ä½¿ç”¨UIButtonæ¥å®žçŽ°. ä½†æ˜¯ä¸æŠ˜è…¾æ€Žä¹ˆè¯æ˜Žæˆ‘ä»¬å­˜åœ¨è¿‡ ä½¿ç”¨è‡ªå®šä¹‰UILabelçš„å­ç±»æ¥å®žçŽ°ä¸€æ ·çš„æ•ˆæžœ,ä»£ç å¦‚ä¸‹1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768public enum EIconEdgeDirection &#123; case left case right&#125;public class IconEdgeInsetsLabel: UILabel &#123; /// UIView çµæ´»å¤šå˜ public var iconView: UIView? &#123; didSet&#123; if oldIconView != nil &amp;&amp; oldIconView!.isKind(of: UIView.self) &#123; oldIconView?.removeFromSuperview() &#125; oldIconView = iconView iconView!.x = 0.0 iconView!.y = 0.0 addSubview(iconView!) &#125; &#125; public var edgeInsets: UIEdgeInsets = UIEdgeInsets.zero /// iconView é»˜è®¤åœ¨å·¦è¾¹ public var direction: EIconEdgeDirection = .left /// ç”¨äºŽè°ƒæ•´iconView å’Œ æ–‡å­— ä¹‹é—´çš„é—´è· public var gap: CGFloat = 0.0 private var oldIconView: UIView? private func sizeToFit(_ text: String) &#123; self.text = text self.sizeToFit() &#125; private func sizeToFit(attributeText: NSAttributedString) &#123; self.attributedText = attributedText self.sizeToFit() &#125; public override func drawText(in rect: CGRect) &#123; var insets = self.edgeInsets if iconView != nil &#123; if self.direction == .left &#123; iconView?.left = insets.left iconView?.centerY = self.middleY insets = UIEdgeInsets(top: insets.top, left: insets.left + gap + iconView!.width, bottom: insets.bottom, right: insets.right) &#125;else if self.direction == .right &#123; iconView?.right = self.width - insets.right iconView?.centerY = self.middleY insets = UIEdgeInsets(top: insets.top, left: insets.left, bottom: insets.bottom, right: insets.right + gap + (iconView?.width)!) &#125; &#125; super .drawText(in: UIEdgeInsetsInsetRect(rect, insets)) &#125; public override func textRect(forBounds bounds: CGRect, limitedToNumberOfLines numberOfLines: Int) -&gt; CGRect &#123; let insets = self.edgeInsets var rect = super.textRect(forBounds: UIEdgeInsetsInsetRect(bounds, insets), limitedToNumberOfLines: numberOfLines) rect.origin.x -= insets.left rect.origin.y -= insets.top rect.size.height += (insets.top + insets.bottom) if iconView != nil &amp;&amp; iconView!.isKind(of: UIView.self) &#123; rect.size.width += (insets.left + insets.right + gap + iconView!.width) &#125;else&#123; rect.size.width += (insets.left + insets.right) &#125; return rect &#125;&#125; .h 12345678910111213141516#import &lt;UIKit/UIKit.h&gt;typedef enum : NSUInteger &#123; kIconAtLeft, kIconAtRight, &#125; EIconEdgeDirection;@interface IconEdgeInsetsLabel : UILabel@property (nonatomic, strong) UIView *iconView;@property (nonatomic) UIEdgeInsets edgeInsets;@property (nonatomic) EIconEdgeDirection direction;@property (nonatomic) CGFloat gap;@end .m 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081#import "IconEdgeInsetsLabel.h"@interface IconEdgeInsetsLabel ()@property (nonatomic, weak) UIView *oldIconView;@end@implementation IconEdgeInsetsLabel- (CGRect)textRectForBounds:(CGRect)bounds limitedToNumberOfLines:(NSInteger)numberOfLines &#123; UIEdgeInsets insets = self.edgeInsets; CGRect rect = [super textRectForBounds:UIEdgeInsetsInsetRect(bounds, insets) limitedToNumberOfLines:numberOfLines]; rect.origin.x -= insets.left; rect.origin.y -= insets.top; rect.size.height += (insets.top + insets.bottom); _iconView &amp;&amp; [_iconView isKindOfClass:[UIView class]] ? (rect.size.width += (insets.left + insets.right + _gap + _iconView.frame.size.width)) : (rect.size.width += (insets.left + insets.right)); return rect;&#125;- (void)drawTextInRect:(CGRect)rect &#123; UIEdgeInsets insets = self.edgeInsets; if (self.iconView) &#123; if (self.direction == kIconAtLeft) &#123; _iconView.left = insets.left; _iconView.centerY = self.middleY; insets = UIEdgeInsetsMake(insets.top, insets.left + _gap + _iconView.frame.size.width, insets.bottom, insets.right); &#125; else if (self.direction == kIconAtRight) &#123; _iconView.right = self.width - insets.right; _iconView.centerY = self.middleY; insets = UIEdgeInsetsMake(insets.top, insets.left, insets.bottom, insets.right + _gap + _iconView.frame.size.width); &#125; &#125; [super drawTextInRect:UIEdgeInsetsInsetRect(rect, insets)];&#125;- (void)sizeToFitWithText:(NSString *)text &#123; self.text = text; [self sizeToFit];&#125;- (void)sizeToFitWithAttrText:(NSAttributedString *)text &#123; self.attributedText = text; [self sizeToFit];&#125;#pragma mark - setter &amp; getter.@synthesize iconView = _iconView;- (void)setIconView:(UIView *)iconView &#123; _oldIconView &amp;&amp; [_oldIconView isKindOfClass:[UIView class]] ? ([_oldIconView removeFromSuperview]) : 0; _iconView = iconView; _oldIconView = iconView; iconView.x = 0.f; iconView.y = 0.f; [self addSubview:iconView];&#125;- (UIView *)iconView &#123; return _iconView;&#125;@end é‚£ä¹ˆå®žé™…ä¸­å¦‚ä½•ä½¿ç”¨å‘¢?swift12345678910111213lazy var vipTypeLabel: IconEdgeInsetsLabel = &#123; let l: IconEdgeInsetsLabel = IconEdgeInsetsLabel() l.textColor = UIColor(hex: 0xFF8A00) l.backgroundColor = .white l.layer.cornerRadius = 2 l.layer.masksToBounds = true l.text = "é›¶å”®ä»·" l.edgeInsets = UIEdgeInsets(top: 1, left: 2, bottom: 1, right: 2) l.textAlignment = .center l.iconView = UIImageView(image: UIImage.init(named: "img_name")) l.direction = .right return l&#125;() oc12345678910111213- (IconEdgeInsetsLabel *)iconLabel &#123; if(_iconLabel) return _iconLabel; UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 12, 12)]; imageView.image = [UIImage imageNamed:@"right_arrow_orange"]; _iconLabel = [IconEdgeInsetsLabel new]; _iconLabel.direction = kIconAtRight; _iconLabel.gap = 4; _iconLabel.iconView = imageView; _iconLabel.textColor = HEXCOLOR(0xFF8A00); _iconLabel.font = SystemFontWithPxSize(14.f); _iconLabel.textAlignment = NSTextAlignmentCenter; return _iconLabel;&#125; å‚è€ƒtextrectforbounds limitedtonumberoflines]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>UILabel</tag>
        <tag>Swift</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iosé›†æˆcordovaè‡ªå®šä¹‰æ’ä»¶ä»¥åŠåœ¨vueä¸­çš„ä½¿ç”¨.]]></title>
    <url>%2F2018%2F01%2F04%2Fhow-to-use-cordova-custom-plugin-in-vue%2F</url>
    <content type="text"><![CDATA[å¼€å§‹å‰, å…ˆåæ§½ä¸€æ³¢, è¿™æ®µè¯åŽé¢çš„â€,â€åŽé¢çš„ç©ºæ ¼çœ‹è§äº†ä¹ˆ, è¿™æ˜¯ES6çš„è¯­æ³•, æŠ˜ç£¨æˆ‘åŠå¤©.å¼€å§‹å‰,å…ˆåæ§½ä¸€æ³¢,è¿™æ®µè¯åŽé¢çš„â€,â€åŽé¢çš„ç©ºæ ¼çœ‹è§äº†ä¹ˆ,è¿™æ˜¯ES6çš„è¯­æ³•,æŠ˜ç£¨æˆ‘åŠå¤©.æ²¡æœ‰å¯¹æ¯”å°±æ²¡æœ‰ä¼¤å®³, å¿ƒåœ¨æ»´è¡€ðŸ˜‚N å¹´ä¸ç”¨çš„js,å·®ä¸€ç‚¹ å°± LFAT, æˆ‘çš„å…ƒæ—¦ä¸‰å¤©å‡â€¦ðŸ˜‚ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” åŽä¸½ä¸½çš„å¼€å§‹äº†,å‡†å¤‡å¥½ä½ ä»¬çš„é“å…· â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”##1.é¡¹ç›®åˆ›å»ºåŸºäºŽ webpack æ¨¡æ¿åˆ›å»ºä¸€ä¸ª vue é¡¹ç›® cordova : cordova create hello com.example.hello HelloWord ç¬¬ä¸€ä¸ªå‚æ•° hello è¡¨ç¤ºåœ¨å·¥ç¨‹ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª hello çš„æ–‡ä»¶å¤¹ ç¬¬äºŒä¸ªå‚æ•° com.example.hello è¡¨ç¤ºåŒ…åï¼ˆåå‘åŸŸåï¼‰ï¼Œç”¨äºŽæ ‡å¿—ä¸åŒçš„ app ç¬¬ä¸‰ä¸ªå‚æ•° HelloWordè¡¨ç¤ºé¡¹ç›®çš„åç§°ï¼Œå¯ä»¥åœ¨ config.xml æ–‡ä»¶ä¸­ä¿®æ”¹ åˆ›å»ºåŸºäºŽ webpack æ¨¡æ¿çš„ vue é¡¹ç›® vue : vue init webpack my-project ##2.æ·»åŠ cordovaé¡¹ç›®çš„å¹³å°æ”¯æŒ 2.1 è¿›å…¥åˆ›å»ºçš„é¡¹ç›®ç›®å½•cd hello 2.2 æŸ¥çœ‹å·²æœ‰çš„å¹³å°cordova platforms list 2.3æ·»åŠ æ‰€éœ€è¦çš„å¹³å°cordova platform add androidcordova platform add ios 2.4å¦‚æžœæƒ³ç§»é™¤å·²ç»æ·»åŠ çš„å¹³å°çš„è¯cordova platform remove android or cordova platform rm android ##3.pluman çš„å®‰è£… 3.1å®‰è£… plugmannpm install -g plugman 3.2åˆ›å»º plugman æ’ä»¶ è¯­æ³•å¦‚ä¸‹:plugman create --name &lt;pluginName&gt; --plugin_id &lt;pluginID&gt; --plugin_version &lt;version&gt; [--path &lt;directory&gt;] [--variableNAME=VALUE] egg : plugman create --name hello --plugin_id firstPlugin --plugin_version 0.0.1 123456å‚æ•°:pluginName: æ’ä»¶åå­—pluginID: æ’ä»¶id, egg : coolPlugin oversion: ç‰ˆæœ¬, egg : 0.0.1directory:ä¸€ä¸ªç»å¯¹æˆ–ç›¸å¯¹è·¯å¾„çš„ç›®å½•ï¼Œè¯¥ç›®å½•å°†åˆ›å»ºæ’ä»¶é¡¹ç›®variable NAME=VALUE: é¢å¤–çš„æè¿°ï¼Œå¦‚ä½œè€…ä¿¡æ¯å’Œç›¸å…³æè¿° å›žåˆ° cordova åˆ›å»ºé¡¹ç›®ç›®å½•ä¸‹ æ‰¾åˆ° platforms ä¸‹ çš„ ios / android é¡¹ç›®åœ¨ plugin ç›®å½•ä¸‹ ç¼–å†™éœ€è¦çš„ nativeæ–‡ä»¶ (native æ–‡ä»¶ä¹Ÿå¯ä»¥åŽé¢å†™) å°†ç¼–å†™å¥½çš„ native æ’ä»¶ æ”¾å…¥ cordova æ’ä»¶ä¸‹çš„ src ç›®å½• è§„èŒƒåŒ–çš„å¤„ç†æ˜¯ å»ºç«‹å¹³å°æ–‡ä»¶å¤¹ æ”¾å…¥ å¯¹åº”çš„å¹³å°æ–‡ä»¶å¤¹ä¸­ è¿™é‡Œ ä»¥ iOS ä¸ºä¾‹ æ£€æŸ¥ plugin.xml é…ç½®æ–‡ä»¶ç›¸å…³èŠ‚ç‚¹çš„é…ç½®123456789101112131415161718&lt;?xml version='1.0' encoding='utf-8'?&gt;&lt;plugin id="firstPlugin" version="0.0.1" xmlns="http://apache.org/cordova/ns/plugins/1.0" xmlns:android="http://schemas.android.com/apk/res/android"&gt; &lt;name&gt;hello&lt;/name&gt; &lt;js-module name="hello" src="www/hello.js"&gt; &lt;!-- &lt;clobbers target="cordova.plugins.hello" /&gt; --&gt; &lt;clobbers target="navigator.hello" /&gt; &lt;/js-module&gt; &lt;platform name="ios"&gt; &lt;config-file target="config.xml" parent="/*"&gt; &lt;feature name="HelloWord"&gt; &lt;param name="ios-package" value="CDVHelloWord"/&gt; &lt;param name="onload" value="true" /&gt; &lt;/feature&gt; &lt;/config-file&gt; &lt;header-file src="src/ios/CDVHelloWord.h" /&gt; &lt;source-file src="src/ios/CDVHelloWord.m" /&gt; &lt;/platform&gt;&lt;/plugin&gt; è¿™æ ·åˆ›å»ºçš„æ’ä»¶ æ˜¯ä¸èƒ½å®‰è£…çš„ ç¼ºå°‘ package.json æ–‡ä»¶ æ‰§è¡Œ plugman createpackagejson æ’ä»¶ç›®å½• ç”Ÿæˆ package.json æ’ä»¶ä¿¡æ¯æ–‡ä»¶(terminalä¼šè®©ä½ è¾“å…¥ä¸€äº›ä¸œè¥¿) å¦‚ä¸‹: å‰ä¸¤è¡Œæ˜¯åˆ›å»ºæ’ä»¶çš„æ—¶å€™ è‡ªå¸¦çš„ä¿¡æ¯ æ²¡æœ‰å‘å¸ƒåˆ° git æ‰€ä»¥å¯ä»¥æ²¡å¡« name: (firstPlugin) version: (0.0.1) description: æµ‹è¯•æ’ä»¶ git repository: author: 348043793@qq.com license: (ISC) MIT æ’ä»¶æ·»åŠ æ­£å¸¸ æç¤ºå¦‚ä¸‹ : name: (coolPlugin) version: (0.0.1) description: æµ‹è¯•æ’ä»¶ git repository: author: 348043793@qq.com license: (ISC) MIT About to write to /Users/ooops/Desktop/oc_vue/package.json: { &quot;name&quot;: &quot;coolPlugin&quot;, &quot;version&quot;: &quot;0.0.1&quot;, &quot;description&quot;: &quot;æµ‹è¯•æ’ä»¶&quot;, &quot;cordova&quot;: { &quot;id&quot;: &quot;coolPlugin&quot;, &quot;platforms&quot;: [ &quot;ios&quot; ] }, &quot;keywords&quot;: [ &quot;ecosystem:cordova&quot;, &quot;cordova-ios&quot; ], &quot;author&quot;: &quot;348043793@qq.com&quot;, &quot;license&quot;: &quot;MIT&quot; } Is this ok? (yes) ç¼–å†™æ’ä»¶ä»£ç è¿™ä¸ªæ ¹æ®ä¸šåŠ¡ / é€»è¾‘ éœ€è¦è‡ªè¡Œç¼–å†™ (è¯·è‡ªè¡Œä½¿ç”¨ ç™¾åº¦ google ä¸€ä¸‹), æ”¾å‡ºä¸€ä¸ªç®€å•çš„ç¤ºä¾‹1234567891011121314151617181920var exec = require('cordova/exec'); // å›ºå®šæ ¼å¼var options = &#123;quality: '200'&#125;; // æ²¡ä»€ä¹ˆåµç”¨çš„å‚æ•°// exports.sayHi æ‰©å±•ä¸€ä¸ªæ’ä»¶çš„æ–¹æ³•/** &lt;feature name="HelloWord"&gt; &lt;param name="ios-package" value="CDVHelloWord"/&gt; &lt;param name="onload" value="true" /&gt; &lt;/feature&gt;* * exec(success, error, 'HelloWord', 'sayHello', [options]);* success æˆåŠŸå›žè°ƒ,* error å¤±è´¥å›žè°ƒ,* HelloWord ä¸Šé¢ feature ä¸­çš„ name,* sayHello CDVHelloWord(åŽŸç”Ÿæ–‡ä»¶)ä¸­çš„å‡½æ•°å / æ–¹æ³•å, éœ€è¦ä¼ é€’ç»™åŽŸç”Ÿçš„å‚æ•°(å­—å…¸ / å­—å…¸æ•°ç»„) * exec(success, error, 'HelloWord', 'sayHello', [options]);*/ exports.sayHi = function (options, success, error) &#123; exec(success, error, 'HelloWord', 'sayHello', [options]);&#125;; å®‰è£…ç¼–å†™çš„æ’ä»¶cd æ’ä»¶ç›®å½• æ‰§è¡Œ pwd å¾—åˆ°å½“å‰æ’ä»¶ç›®å½• /Users/ooops/Desktop/plugins/hello cd cordova é¡¹ç›®ç›®å½• æ‰§è¡Œ cordova plugin add æ’ä»¶ç›®å½• è¾“å‡ºä¿¡æ¯ å¦‚ä¸‹ è¡¨ç¤ºæ’ä»¶å®‰è£…æˆåŠŸ : Installing &quot;SimpleMath&quot; for android Android Studio project detected Installing &quot;SimpleMath&quot; for ios Adding SimpleMath to package.json Saved plugin info for &quot;SimpleMath&quot; to config.xml vue-cordova æ’ä»¶çš„ä½¿ç”¨åœ¨çº¿å®‰è£… - è¿™ä¸ªä¸åšä»‹ç»äº† å‘äº†æˆ‘ä¸¤å¤©æœ¬åœ°å®‰è£… ä¸ºä»€ä¹ˆè¦æœ¬åœ°å®‰è£…ï¼Ÿ çŽ°æœ‰çš„æ’ä»¶ä¸å¤Ÿï¼Œå¦‚æžœè¦è°ƒç”¨è‡ªå·±å¼€å‘çš„æ’ä»¶ï¼Œåœ¨çº¿çš„ä¸èƒ½ç”¨ï¼Œåªèƒ½å°†é¡¹ç›®æ”¾åœ¨Vueé¡¹ç›®ä¸­æ ¹æ®å®žé™…æƒ…å†µè‡ª å·±æ·»åŠ æ’ä»¶ å¦‚æžœå·²å®‰è£…äº† vue-cordova ,æŽ§åˆ¶å°æ‰§è¡Œ npm uninstall vue-cordova åˆ é™¤æŽ‰ åœ¨ github ä¸Š clone ä¸‹ vue-cordova é¡¹ç›® git clone https://github.com/kartsims/vue-cordova.git åœ¨ Vue é¡¹ç›®çš„ src ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª cordova ç›®å½• å°†ä¸‹è½½çš„ vue-cordova srcç›®å½•ä¸‹çš„ index.js copy åˆ° Vue é¡¹ç›®æ–°å»ºçš„ cordova ç›®å½•ä¸‹é¢ï¼Œå‘½åä¸º cordova-plugin-index.js ,ä¸è¦ä½¿ç”¨ index.js ï¼Œå¦åˆ™ä¼šå‡ºçŽ°å‘½åå†²çª main.js çš„å¯¼åŒ…æ”¹æˆä¸‹é¢çš„æ ·å­ï¼š 12import VueCordova from './cordova/cordova-plugin-index.js'Vue.use(VueCordova) App.vue ä¸­ éœ€è¦1import Vue from 'vue' åˆ°è¿™é‡Œ çŽ¯å¢ƒåŸºæœ¬æžå¥½äº† å¦‚ä½•å®‰è£…æœ¬åœ°æ’ä»¶åœ¨ Vue é¡¹ç›®æ–‡ä»¶çš„ cordova ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª plugins ç›®å½• åœ¨ src/cordova/plugins/ ç›®å½•ä¸‹æ–°å»º cordova-plugin-sayhi.js ,æŒ‰ç…§ camera æ’ä»¶ä»¿é€ çš„ä¸€ä¸ª js æ–‡ä»¶ 1234567891011exports.install = function (Vue, options, cb) &#123; document.addEventListener('deviceready', () =&gt; &#123; if (typeof navigator.hello === 'undefined') &#123; return cb(false) &#125; // å…³é”®ç‚¹ Vue.cordova.hello = navigator.hello return cb(true) &#125;, false)&#125; å…¶ä¸­ navigator.hello ä¸º æ’ä»¶çš„ config.xml ä¸­çš„ &lt;clobbers target=&quot;navigator.hello&quot; /&gt; èŠ‚ç‚¹ä¸­çš„å†…å®¹ å°†è‡ªå®šä¹‰çš„æ’ä»¶ æ·»åŠ åˆ° cordova-plugin-index.js ä¸­ å¦‚ä¸‹ä½ç½® 123const pluginsList = [ 'cordova-plugin-sayhi'] Vue ä¸­è°ƒç”¨æ’ä»¶ 1&lt;button v-on:click="click"&gt;Add 1&lt;/button&gt; 123456789101112131415import Vue from 'vue' // è¿™ä¸ªå¾ˆé‡è¦, å¦åˆ™ä¼šæŠ¥ Vue is undefinedexport default &#123; name: 'app', methods: &#123; click: function () &#123; window.alert(Vue); Vue.cordova.hello.saiHi(&#123;quality: '200'&#125;, function (success) &#123; window.alert(success); &#125;, function (error) &#123; window.alert(error) &#125;) &#125; &#125;&#125; å­˜åœ¨çš„é—®é¢˜ ä¸Šè¿°è§£å†³æ–¹æ¡ˆ é€‚ç”¨äºŽ vue æ•´ä¸ªé¡¹ç›®æ‰“åŒ… æ‰”è¿› app ä½¿ç”¨ webpack æ‰“åŒ… app å¦‚æžœ H5 é›†æˆçš„è¿‡å¤š app å®‰è£…åŒ…åŠ¿å¿…ä¼šè¶Šæ¥è¶Šå¤§â€¦â€¦. è¯·çœ‹ä¸‹é¢çš„æè¿° 1234567891011121314151617181920212223çŒœæƒ³æ‰¾ä¸åˆ°æ’ä»¶, æ’ä»¶æ˜¯å­˜åœ¨çš„,åªæ˜¯ä»–æ‰¾ä¸åˆ°,è°ƒç”¨æ’ä»¶æ˜¯éœ€è¦ä¾èµ–åº“çš„,em è²Œä¼¼å¾ˆæœ‰é“ç†æ’ä»¶éœ€è¦ä¾èµ–çš„æ–‡ä»¶,å…ˆå¯¼å…¥çœ‹çœ‹.# éªŒè¯çŒœæƒ³ å°è¯•1 window.alert(Vue.cordova.plugins);åœ¨ index.htmlæ–‡ä»¶ä¸­æ‰‹åŠ¨åŠ å…¥ cordova.jsæ‰“å° æ’ä»¶æ•°ç»„ ...............ok - â˜ºå¦‚ä½•è®©ä»– æ‰¾åˆ°è¿™ä¸ªæ’ä»¶....ç»§ç»­æ‘¸ç´¢ç³Šé‡Œç³Šæ¶‚çš„ åˆå¼•ç”¨äº† exec.js æ–‡ä»¶è§£å†³: æ‰“åŒ…æ•´ä¸ªé¡¹ç›®æ”¾åˆ°æœåŠ¡å™¨æ‰¾ä¸åˆ°æ’ä»¶ åœ¨index.htmlä¸­ æ·»åŠ å¦‚ä¸‹ä¸¤ä¸ªæ–‡ä»¶çš„å¼•ç”¨&lt;script type=text/javascript src=cordova.js&gt;&lt;/script&gt;&lt;script type=text/javascript src=cordova-js-src/exec.js&gt;&lt;/script&gt;// è¿™ä¸¤å¥æ²¡ä»€ä¹ˆåµç”¨ - æœ‰æ²¡æœ‰ä¸€æ ·?&lt;script type=text/javascript src=cordova-js-src/platform.js&gt;&lt;/script&gt;&lt;script type=text/javascript src=cordova_plugins.js&gt;&lt;/script&gt; è‡³æ­¤ Vue å’Œ native å¯ä»¥äº¤äº’ - è‡³äºŽå§¿åŠ¿ è‡ªç”±é€‰æ‹© å¯ä»¥è§£é”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”- å°±è¿™ä¹ˆåŽä¸½ä¸½çš„ç»“æŸäº† â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-å‚è€ƒé“¾æŽ¥ Vue Document vue-cordova Document]]></content>
      <categories>
        <category>cordova</category>
      </categories>
      <tags>
        <tag>cordova</tag>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS AttributeString]]></title>
    <url>%2F2017%2F12%2F18%2Fattributestring%2F</url>
    <content type="text"><![CDATA[Getting StartedOPAttributeString is available through CocoaPods. To installit, simply add the following line to your Podfile: 1pod 'OPAttributeString' How To UseObjective-C123456NSString *despicableMe = @"I know someone whoabccan fix that for you."; self.someLabel.attributedText = [despicableMe make_Attribute:^(OPAttribute *make) &#123; make.font([UIFont fontWithName:@"Courier New" size:12]); make.textColor([UIColor redColor]); make.backgroundColor([UIColor greenColor]);&#125;]; or you can write like this.123456NSString *despicableMe = @"I know someone whoabccan fix that for you."; self.someLabel.attributedText = [despicableMe make_Attribute:^(OPAttribute *make) &#123; make.font([UIFont fontWithName:@"Courier New" size:12]) .textColor([UIColor redColor]) .backgroundColor([UIColor greenColor]);&#125;]; or this minimalist writing123456NSString *despicableMe = @"I know someone whoabccan fix that for you.";self.someLabel.attributedText = despicableMe.font([UIFont fontWithName:@"Courier New" size:12]).textColor([UIColor redColor]).backgroundColor([UIColor greenColor]).string; now you can see it. But most of the time , you want set a part attribute of string. there is some API can use.from(index)If the index parameter exceeds the string range, the correction processing rules are as follows: (index &lt; 0 || index &gt; string.length) ? 0 : index; 1234NSString *despicableMe = @"I know someone whoabccan fix that for you."; self.someLabel.attributedText = [despicableMe make_Attribute:^(OPAttribute *make) &#123; make.from(0).font([UIFont systemFontOfSize:10]);&#125;]; to(index)the correction processing rules are as follows: (index &lt; 0 || index &gt; string.length) ? string.length : index; 12345NSString *despicableMe = @"I know someone whoabccan fix that for you."; self.someLabel.attributedText = [despicableMe make_Attribute:^(OPAttribute *make) &#123; make.font([UIFont systemFontOfSize:10]); make.to(5).font([UIFont systemFontOfSize:17]);&#125;]; fromTo(location,length)the correction processing rules are as follows location rules: same with from(index). length rules: same with to(index). 123456NSString *despicableMe = @"I know someone whoabccan fix that for you."; self.someLabel.attributedText = [despicableMe make_Attribute:^(OPAttribute *make) &#123; make.font([UIFont systemFontOfSize:10]); make.to(5).font([UIFont systemFontOfSize:17]); make.fromTo(8,12).backgroundColor([UIColor orangeColor]);&#125;]; range(NSRange)use it like fromTo(location,length)123456NSString *despicableMe = @"I know someone whoabccan fix that for you."; self.someLabel.attributedText = [despicableMe make_Attribute:^(OPAttribute *make) &#123; make.font([UIFont systemFontOfSize:10]); make.to(5).font([UIFont systemFontOfSize:17]); make.range(NSMakeRange(0,10)).backgroundColor([UIColor orangeColor]);&#125;]; the correction processing rules are as follows1234NS_INLINE BOOL rangeCheck(NSRange range, NSRange rangeContainer) &#123; if(range.location &lt; 0 || rangeContainer.location &lt; 0 || rangeContainer.location &gt; range.length) return false; return range.location &lt;= rangeContainer.location &amp;&amp; range.length &gt;= rangeContainer.length;&#125; rangeOf(somestring)Use this function to find the range of characters or strings.1234NSString *despicableMe = @"I know someone whoabccan fix that for you."; self.someLabel.attributedText = [despicableMe make_Attribute:^(OPAttribute *make) &#123; make.rangeOf(@"fix").strokeColor([UIColor blueColor]).strokeWidth(3);&#125;]; insert(â€¦)this is a multi-parameter function, roughly as follows: first case: insert a string to source string123456789NSString *despicableMe = @"I know someone whoabccan fix that for you.";self.someLabel.attributedText = [despicableMe make_Attribute:^(OPAttribute *make) &#123; // default insert a string to the end of source string make.insert(@"\n"); // or you can specified a string and index to insert // the index parameter has rules same way to(index) used // so -1 means 'ooops' will be inserted to the end make.insert(@"ooops",-1);&#125;]; second case: insert a NSAttributedString to source string123456789NSMutableAttributedString *string = [[NSMutableAttributedString alloc] initWithString:@"e"];[string addAttribute:NSBackgroundColorAttributeName value:[UIColor redColor] range:NSMakeRange(0, 1)];NSString *despicableMe = @"I know someone whoabccan fix that for you.";self.someLabel.attributedText = [despicableMe make_Attribute:^(OPAttribute *make) &#123; make.insert(string); make.insert(string,-1);&#125;]; let us change the diffrent index paramters.12make.insert(string,0);make.insert(string,-1); then will display like this third case: insert a UIImage to source string123456NSString *despicableMe = @"I know someone whoabccan fix that for you."; self.demoLabel.attributedText = [despicableMe make_Attribute:^(OPAttribute *make) &#123; UIImage *img = [UIImage imageNamed:@"old_sj"]; make.insert(img, 0, CGRectMake(0, 0, 18, 18), AttachmentAlignmentNormal);&#125;]; append(â€¦)you can use it like insert(â€¦), the difference between inserting and appending, appending always adding characters or strings to the end of the source string.12345678NSMutableAttributedString *attributeString = @"e".backgroundColor([UIColor redColor]).string;UIImage *img = [UIImage imageNamed:@"old_sj"];self.demoLabel.attributedText = @"".append(@"_append").append(attributeString).append(@"\r\n").append(img,CGRectMake(0, 0, 18, 18),AttachmentAlignmentNormal).string; regex pattern12345NSString *despicableMe = @"I know someone whoabccan fix that for you."; self.demoLabel.attributedText = [despicableMe make_Attribute:^(OPAttribute *make) &#123; make.pattern(@"o").strokeColor([UIColor redColor]).strokeWidth(-5);&#125;]; remove some char or string from source string, you can do it like by this way.1234567891011NSString *despicableMe = @&quot;I know someone whoabccan fix that for you.&quot;; self.demoLabel.attributedText = [despicableMe make_Attribute:^(OPAttribute *make) &#123; // remove all char &apos;o&apos; from source string. // defalut matching hole source string. make.removeE(@[@&quot;o&quot;]); // specified range make.removeE(@[@&quot;o&quot;],, NSMakeRange(0, 10)); // mult-matching and specified range. make.removeE(@[@&quot;e&quot;,@&quot;o&quot;], NSMakeRange(0, 10));&#125;]; replace some char or string from source string, you can do it like by this way.range rule: rangeCheck c function123456789101112131415NSString *despicableMe = @&quot;I know someone whoabccan fix that for you.&quot;; self.demoLabel.attributedText = [despicableMe make_Attribute:^(OPAttribute *make) &#123; // matching the hole source string make.replace(@&quot;o&quot;,@&quot;O&quot;); // matching the hole source string in range make.replace(@&quot;o&quot;,@&quot;O&quot;,NSMakeRange(0, 8)); // mult-matching the hole string with dictionary // dictionary&apos;s key will matching. // the dictionary key&apos;s matching value will be replaced by dictionary&apos;s value. // defalut matching hole source string. make.replaceE(@[@&#123;@&quot;e&quot; : @&quot;o&quot;&#125;,@&#123;@&quot;y&quot; : @&quot;Y&quot;&#125;]); // in the same way ... in range make.replaceE(@[@&#123;@&quot;o&quot; : @&quot;0&quot;&#125;,@&#123;@&quot;n&quot; : @&quot;u&quot;&#125;],NSMakeRange(0, 8));&#125;]; Authorurm9ril, 348043793@qq.com]]></content>
      <tags>
        <tag>AttributeString</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS å…¨å±æˆªå›¾åˆ†äº«ç»„ä»¶]]></title>
    <url>%2F2017%2F08%2F31%2Ffullscreen-capture%2F</url>
    <content type="text"><![CDATA[é¡¹ç›®éœ€æ±‚ç”¨æˆ·åœ¨ä»»æ„ç•Œé¢æˆªå±å¯åˆ†äº«è‡³å¾®ä¿¡å’ŒQQå¹³å°,ä¸”éœ€åœ¨åˆ†äº«çš„å›¾ç‰‡æ‹¼æŽ¥ä¸Šä¸€äº›å¿…è¦çš„ä¿¡æ¯,å¦‚ è¯´æ˜Ž,App Storeä¸‹è½½é“¾æŽ¥äºŒç»´ç ç­‰. æ€è·¯èŽ·å–æˆªå±é€šçŸ¥,èŽ·å–å½“å‰å±å¹•çš„å›¾ç‰‡ä¸Šä¸‹æ–‡,å†ç»˜åˆ¶æ‰€éœ€çš„ä¿¡æ¯åˆ°ä¸Šä¸‹æ–‡,æœ€åŽå¾—åˆ°æƒ³è¦çš„å›¾ç‰‡ åº”ä¸ºæ˜¯åº”ç”¨å†…å…¨å±€éƒ½éœ€è¦ä½¿ç”¨,æ‰€ä»¥ç¼–å†™Appdelegateåˆ†ç±»çš„æ–¹å¼å®žçŽ°. .h12345678910111213141516171819#import "AppDelegate.h"@interface AppDelegate (Capture)/** æ³¨å†Œ å¿«æ·é”® æˆªå±é€šçŸ¥ */- (void)registerCaptureScreenNotification;/** èŽ·å–å¸¦äºŒç»´ç ä¿¡æ¯çš„å½“å‰å±å¹•æœ‰æˆªå›¾ @param needCode æ˜¯å¦éœ€è¦äºŒç»´ç  @return è¿”å›žå±å¹•æˆªå›¾ */- (UIImage *)imageWithScreenshotNeedCode:(BOOL)needCode;@end .m123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153#import "AppDelegate+Capture.h"#import "CaptureTipView.h"#import "ShareView.h"@interface AppDelegate ()/** æˆªå±å›¾ç‰‡ */@property (nonatomic, strong) UIImage *screenImage;@end@implementation AppDelegate (Capture)- (void)registerCaptureScreenNotification &#123; [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(userDidTakeScreenshot:) name:UIApplicationUserDidTakeScreenshotNotification object:nil]; // ç‚¹å‡»åˆ†äº«æŒ‰é’®çš„é€šçŸ¥ [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(captureShare) name:CaptureTipViewShareButtonTouchedNotification object:nil];&#125;//æˆªå±å“åº”- (void)userDidTakeScreenshot:(NSNotification *)notification &#123; //äººä¸ºæˆªå±, æ¨¡æ‹Ÿç”¨æˆ·æˆªå±è¡Œä¸º, èŽ·å–æ‰€æˆªå›¾ç‰‡ self.screenImage = [self imageWithScreenshotNeedCode:YES]; if(self.screenImage) &#123; [CaptureTipView show]; &#125; &#125;- (void)captureShare &#123; ShareView *share = [[ShareView alloc] initWithShareHeadOprationWith:@"" shareDesc:@"" shareLogo:self.screenImage urlString:nil]; [share show];&#125;- (UIImage *)imageWithScreenshotNeedCode:(BOOL)needCode &#123; NSData *imageData = [self dataWithScreenshotInPNGFormatNeedCode:needCode]; return [UIImage imageWithData:imageData];&#125;/** * æˆªå–å½“å‰å±å¹• * * @return NSData * */- (NSData *)dataWithScreenshotInPNGFormatNeedCode:(BOOL)needCode&#123; CGSize imageSize = CGSizeZero; UIInterfaceOrientation orientation = [UIApplication sharedApplication].statusBarOrientation; if (UIInterfaceOrientationIsPortrait(orientation)) imageSize = [UIScreen mainScreen].bounds.size; else imageSize = CGSizeMake([UIScreen mainScreen].bounds.size.height, [UIScreen mainScreen].bounds.size.width); if(needCode) &#123; // ä»·æ ¼æ¡ä»¶ - æ˜¯å¦éœ€è¦ æ·»åŠ  äºŒç»´ç ç­‰ä¿¡æ¯ // èƒŒæ™¯å›¾ UIImage *bgImage = [UIImage imageNamed:@"capture_share_bottom_bg"]; CGFloat bgH = AutoHieght(319); imageSize = CGSizeMake(imageSize.width, imageSize.height + bgH); // logo å›¾ UIImage *logoImage = [UIImage imageNamed:@"capture_share_logo"]; // äºŒç»´ç  å›¾ UIImage *codeImage = [UIImage imageNamed:@"capture_share_code"]; UIGraphicsBeginImageContextWithOptions(imageSize, NO, 0); // ç»˜åˆ¶èƒŒæ™¯å›¾ç‰‡åˆ°ä¸Šä¸‹æ–‡ CGRect bgRect = CGRectMake(0, kScreenHeight, kScreenWidth, bgH); [bgImage drawInRect:bgRect]; // ç»˜åˆ¶logo å›¾ç‰‡åˆ°ä¸Šä¸‹æ–‡ CGFloat logoH = AutoHieght(92), logoW = AutoWidth(79), logoY = AutoHieght(20) + kScreenHeight; CGRect logoRect = CGRectMake(kScreenWidth * .5 - logoW * .5, logoY, logoW, logoH); [logoImage drawInRect:logoRect]; // ç»˜åˆ¶äºŒç»´ç åˆ°ä¸Šä¸‹æ–‡ CGFloat codeH = AutoHieght(110), codeW = codeH, codeY = logoY + logoH + AutoHieght(25); CGRect codeRect = CGRectMake(kScreenWidth * .5 - codeW * .5, codeY, codeW, codeH); [codeImage drawInRect:codeRect]; //ç»˜åˆ¶åˆ°æŒ‡å®šçš„åŒºåŸŸå†…å®¹ NSString *str = @"è®¾ç½®ä½ çš„APPçš„ä¸ªæ€§æ ‡è¯­....."; CGRect rect= CGRectMake(0, codeY + codeH + AutoHieght(26), kScreenWidth, 40); UIFont *font = HelveticaNeueFontWithPxSize(15); //è®¾ç½®å­—ä½“ UIColor *color = HEXCOLOR(0x333333); //å­—ä½“é¢œè‰² NSMutableParagraphStyle *style = [[NSMutableParagraphStyle alloc]init]; //æ®µè½æ ·å¼ NSTextAlignment align = NSTextAlignmentCenter; //å¯¹é½æ–¹å¼ style.alignment = align; [str drawInRect:rect withAttributes:@&#123;NSFontAttributeName:font, NSForegroundColorAttributeName:color, NSParagraphStyleAttributeName:style&#125;]; &#125;else &#123; UIGraphicsBeginImageContextWithOptions(imageSize, NO, 0); &#125; CGContextRef context = UIGraphicsGetCurrentContext(); for (UIWindow *window in [[UIApplication sharedApplication] windows]) &#123; CGContextSaveGState(context); CGContextTranslateCTM(context, window.center.x, window.center.y); CGContextConcatCTM(context, window.transform); CGContextTranslateCTM(context, -window.bounds.size.width * window.layer.anchorPoint.x, -window.bounds.size.height * window.layer.anchorPoint.y); if (orientation == UIInterfaceOrientationLandscapeLeft) &#123; CGContextRotateCTM(context, M_PI_2); CGContextTranslateCTM(context, 0, -imageSize.width); &#125; else if (orientation == UIInterfaceOrientationLandscapeRight) &#123; CGContextRotateCTM(context, -M_PI_2); CGContextTranslateCTM(context, -imageSize.height, 0); &#125; else if (orientation == UIInterfaceOrientationPortraitUpsideDown) &#123; CGContextRotateCTM(context, M_PI); CGContextTranslateCTM(context, -imageSize.width, -imageSize.height); &#125; if ([window respondsToSelector:@selector(drawViewHierarchyInRect:afterScreenUpdates:)]) &#123; [window drawViewHierarchyInRect:window.bounds afterScreenUpdates:YES]; &#125; else &#123; [window.layer renderInContext:context]; &#125; CGContextRestoreGState(context); &#125; UIImage *image = UIGraphicsGetImageFromCurrentImageContext(); UIGraphicsEndImageContext(); return UIImagePNGRepresentation(image);&#125;- (void)setScreenImage:(UIImage *)screenImage &#123; objc_setAssociatedObject(self, @selector(screenImage), screenImage, OBJC_ASSOCIATION_RETAIN_NONATOMIC);&#125;- (UIImage *)screenImage &#123; return objc_getAssociatedObject(self, _cmd);&#125;@end tips: ä½¿ç”¨runtime ä¸ºåˆ†ç±»æ·»åŠ å±žæ€§çš„åº”ç”¨ ShareView ä¸ºè‡ªå®šä¹‰åˆ†äº«ç•Œé¢,å¯è‡ªå·±æ ¹æ®å®žé™…éœ€æ±‚ç¼–å†™ CaptureTipView ä¸ºé¡¶éƒ¨æ˜¯å¦åˆ†äº«æç¤ºç•Œé¢ CaptureTipView.h123456789#import &lt;UIKit/UIKit.h&gt;extern NSString * const CaptureTipViewShareButtonTouchedNotification;@interface CaptureTipView : UIView+ (void)show;@end CaptureTipView.m1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495#import "CaptureTipView.h"static UIWindow *window_;static NSTimer *timer_;/** åŠ¨ç”»æŒç»­æ—¶é—´ï¼ˆå‡ºçŽ°\éšè—ï¼‰ */static CGFloat const AnimationDuration = 0.25;/** æŽ§ä»¶é»˜è®¤ä¼šåœç•™å¤šé•¿æ—¶é—´ */static CGFloat const ControlStayDuration = 3;static CGFloat WindowH = 89, WindowMargin = 8;NSString * const CaptureTipViewShareButtonTouchedNotification = @"CaptureTipViewShareButtonTouchedNotification";@interface CaptureTipView ()/** æ ‡é¢˜ */@property (nonatomic, strong) UILabel *tipLabel;/** æŒ‰é’® */@property (nonatomic, strong) UIButton *shareButton;@end@implementation CaptureTipView+ (void)show &#123; // åœæ­¢ä¹‹å‰çš„å®šæ—¶å™¨ [timer_ invalidate]; // åˆ›å»ºçª—å£ window_.hidden = YES; // å…ˆéšè—ä¹‹å‰çš„window window_ = [[UIWindow alloc] init]; window_.backgroundColor = HEXCOLORA(0xFFFFFF, .96); window_.layer.cornerRadius = 8; window_.layer.shadowColor = HEXCOLOR(0x000000).CGColor; window_.layer.shadowRadius = 8; window_.layer.shadowOffset = CGSizeMake(3.0f, 5.0f); window_.layer.shadowOpacity = .3; window_.windowLevel = UIWindowLevelAlert; window_.frame = CGRectMake(AutoWidth(WindowMargin), - AutoWidth(WindowH), kScreenWidth - AutoWidth(WindowMargin) * 2, AutoWidth(WindowH)); window_.hidden = NO; // æ»‘åŠ¨æ¶ˆå¤± UISwipeGestureRecognizer * swipe = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(hide)]; swipe.direction = UISwipeGestureRecognizerDirectionUp; [window_ addGestureRecognizer:swipe]; UILabel *tipLabel = [UILabel new]; tipLabel.text = @"åˆ†äº«æˆªå›¾ç»™å¥½å‹"; tipLabel.font = HelveticaNeueFontWithPxSize(15); tipLabel.textColor = HEXCOLOR(0x666666); tipLabel.textAlignment = NSTextAlignmentCenter; tipLabel.clipsToBounds = YES; //tipLabel.backgroundColor = [UIColor redColor]; tipLabel.frame = CGRectMake(0, AutoHieght(14), window_.width, 16); [window_ addSubview:tipLabel]; UIButton *shareButton = [UIButton buttonWithType:0]; [shareButton setTitle:@"åˆ†äº«" forState:UIControlStateNormal]; [shareButton setTitleColor:HEXCOLOR(0xFFFFFF) forState:UIControlStateNormal]; [shareButton.layer setCornerRadius:8]; [shareButton setBackgroundColor:kYellowColor]; [shareButton setFrame:CGRectMake(0, 0, AutoWidth(80), AutoHieght(30))]; [shareButton setCenter:CGPointMake(window_.width * .5, tipLabel.bottom + AutoHieght(14) + AutoHieght(14))]; [shareButton touchUpInside:^&#123; [[NSNotificationCenter defaultCenter] postNotificationName:CaptureTipViewShareButtonTouchedNotification object:nil]; [self hide]; &#125;]; [window_ addSubview:shareButton]; // åŠ¨ç”» [UIView animateWithDuration:AnimationDuration animations:^&#123; CGRect frame = window_.frame; frame.origin.y = WindowMargin + (iPhoneX ? 24 : 0); window_.frame = frame; &#125;]; // å¼€å¯ä¸€ä¸ªæ–°çš„å®šæ—¶å™¨ timer_ = [NSTimer scheduledTimerWithTimeInterval:ControlStayDuration target:self selector:@selector(hide) userInfo:nil repeats:NO];&#125;+ (void)hide &#123; // æ¸…ç©ºå®šæ—¶å™¨ [timer_ invalidate]; timer_ = nil; // é€€å‡ºåŠ¨ç”» [UIView animateWithDuration:AnimationDuration animations:^&#123; CGRect frame = window_.frame; frame.origin.y = - AutoWidth(WindowH); window_.frame = frame; &#125; completion:^(BOOL finished) &#123; window_ = nil; [[NSNotificationCenter defaultCenter] removeObserver:self name:CaptureTipViewShareButtonTouchedNotification object:nil]; &#125;];&#125;@end åœ¨Appdelegate1234- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123; /// æ³¨å†Œå…¨å±æˆªå›¾é€šçŸ¥ [self registerCaptureScreenNotification];&#125;]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>æˆªå›¾åˆ†äº«</tag>
        <tag>åˆ†äº«ç»„ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[XLForm è¡¨å•åº“çš„å¤æ‚ä½¿ç”¨ - åœ°å€é€‰æ‹©å™¨]]></title>
    <url>%2F2017%2F06%2F25%2FXLForm-Complex-AreaPicker%2F</url>
    <content type="text"><![CDATA[è¿™æ¬¡æ¥ç‚¹ç‰¹åˆ«çš„ ç»„å¤´çš„ä½¿ç”¨.æ ¹æ®ä¸Šä¸€ç¯‡åšæ–‡XLForm è¡¨å•åº“ä½¿ç”¨è¯´æ˜Žçš„ä»‹ç»,ç®€å•æ”¹é€ ä¸€ä¸‹,å…ˆåˆ›å»ºåªæœ‰ä¸¤ä¸ªç»„å¤´çš„è¡¨å•. ComplexConst å¸¸é‡æ–‡ä»¶ 123// ç»„å¤´ä¿¡æ¯NSString *const kCompanyInfo = @"å…¬å¸ä¿¡æ¯";NSString *const kContactInfo = @"è”ç³»äºº"; ComplexFactory è¡¨å•åˆ›å»ºå·¥åŽ‚ç±»æ–‡ä»¶ 123456789- (void)initForm &#123; XLFormSectionDescriptor * companySection = [XLFormSectionDescriptor formSectionWithTitle:kCompanyInfo]; [self.form addFormSection:companySection]; XLFormSectionDescriptor * contactSection = [XLFormSectionDescriptor formSectionWithTitle:kContactInfo]; [self.form addFormSection:contactSection];&#125; æ•ˆæžœå¦‚ä¸‹: è‡ªå®šä¹‰ç»„å¤´æˆ‘ä»¬éœ€è¦åˆ©ç”¨ä¸€ä¸‹ä»£ç†æ–¹æ³•123- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section// æŽ§åˆ¶ç»„å¤´é«˜åº¦- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section æˆ‘ä»¬å…ˆæ¥è‡ªå®šä¹‰ä¸€ä¸ªç»„å¤´è§†å›¾ SectionHeaderView .h 12345@interface SectionHeaderView : UIView- (instancetype)initWithIndicatorColor:(UIColor *)indicatorColor sectionTitle:(NSString *)sectionTitle;@end .m 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263@interface SectionHeaderView()/** indicatorView - æŒ‡ç¤ºå™¨ */@property (nonatomic, strong) UIView *indicatorView;/** titleV - æ ‡é¢˜è§†å›¾ */@property (nonatomic, strong) UILabel *titleLabel;@end@implementation SectionHeaderView &#123; UIColor *_indicatorColor; NSString *_sectionTitle;&#125;- (instancetype)initWithIndicatorColor:(UIColor *)indicatorColor sectionTitle:(NSString *)sectionTitle &#123; _indicatorColor = indicatorColor; _sectionTitle = sectionTitle; if(self = [super initWithFrame:CGRectZero]) &#123; [self setupUI]; [self makeConstraint]; self.indicatorView.backgroundColor = _indicatorColor; self.titleLabel.text = sectionTitle; &#125; return self;&#125;- (void)setupUI &#123; [self addSubview:self.indicatorView]; [self addSubview:self.titleLabel];&#125;- (void)makeConstraint &#123; [self.indicatorView mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.left.equalTo(self).offset(20); make.centerY.equalTo(self); make.height.mas_equalTo(17); make.width.mas_equalTo(3); &#125;]; [self.titleLabel mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.left.equalTo(self.indicatorView.mas_right).offset(6); make.centerY.equalTo(self.indicatorView); make.right.equalTo(self); &#125;];&#125;- (UIView *)indicatorView &#123; if(_indicatorView) return _indicatorView; _indicatorView = [UIView new]; return _indicatorView;&#125;- (UILabel *)titleLabel &#123; if(_titleLabel) return _titleLabel; _titleLabel = [UILabel new]; _titleLabel.textColor = [UIColor orangeColor]; _titleLabel.font = [UIFont systemFontOfSize:16]; return _titleLabel;&#125;@end viewController.m ä¸­ 123456789101112131415161718192021@interface ViewController ()/** è¡¨å¤´è§†å›¾æ˜¾ç¤ºæ ‡é¢˜æ•°ç»„ */@property (nonatomic, strong) NSArray *sectionHeadViewTitleArray;- (void)viewDidLoad &#123; [super viewDidLoad]; self.sectionHeadViewTitleArray = @[kCompanyInfo, kContactInfo];&#125;......@end- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section &#123; NSString *sectionTitle = [NSString stringWithFormat:@"%@",self.sectionHeadViewTitleArray[section]]; SectionHeaderView *sectionHeadView = [[SectionHeaderView alloc] initWithIndicatorColor:HEXCOLOR(0xFF8A00) sectionTitle:sectionTitle]; return sectionHeadView;&#125;- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section &#123; return 30.f;&#125; å¥½äº† è·‘ä¸€ä¸‹çœ‹çœ‹å§. è‡ªå®šä¹‰åœ°å€é€‰æ‹©å™¨æˆ‘ä»¬çŽ°åœ¨åœ¨ç¬¬ä¸€ç»„é‡Œé¢å¢žåŠ ä¸€ä¸ªè‡ªå®šä¹‰çš„ åœ°å€é€‰æ‹©å™¨ cell å›žé¡¾ä¸€ä¸‹è‡ªå®šä¹‰ cell çš„å¥—è·¯. 1.load æ³¨å†Œè‡ªå®šä¹‰çš„ cell. 2.configure åˆå§‹åŒ–ä¸€äº› cell é…ç½®ä¿¡æ¯. 3.update æ›´æ–° XLFromRowDescriptor å¯¹è±¡çš„ value å±žæ€§å€¼. ComplexAreaCell.h1234567891011#import "XLFormBaseCell.h"extern NSString * const XLFormRowDescriporTypeComplexArea;@interface ComplexAreaCell : XLFormBaseCell@property (nonatomic, readonly) UILabel *textLabel;@property (nonatomic, readonly) UITextField *textField;@property (nonatomic, readonly) UIImageView *accessorry;@end ComplexAreaCell.m123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185#import "ComplexAreaCell.h"#import &lt;XLForm/XLForm.h&gt;NSString * const XLFormRowDescriporTypeComplexArea = @"XLFormRowDescriporTypeComplexArea";@interface ComplexAreaCell()&lt;UIPickerViewDelegate, UIPickerViewDataSource&gt;/** pickView */@property (nonatomic, strong) UIPickerView *pickerView;@end@implementation ComplexAreaCell@synthesize textLabel = _textLabel;@synthesize textField = _textField;@synthesize accessorry = _accessorry;// åœ¨ä¸»è¡¨å•ä¸­åŠ å…¥ä¸€ç»„Key Value è‡ªå®šä¹‰çš„å¿…é¡»é‡å†™+ (void)load &#123; [XLFormViewController.cellClassesForRowDescriptorTypes setObject:[self class] forKey:XLFormRowDescriporTypeComplexArea];&#125;- (UIView *)inputView &#123; if ([self.rowDescriptor.rowType isEqualToString:XLFormRowDescriporTypeComplexArea])&#123; return self.pickerView; &#125; return [super inputView];&#125;- (BOOL)formDescriptorCellCanBecomeFirstResponder &#123; return (!self.rowDescriptor.isDisabled &amp;&amp; ([self.rowDescriptor.rowType isEqualToString:XLFormRowDescriporTypeComplexArea]));&#125;- (BOOL)formDescriptorCellBecomeFirstResponder &#123; return [self becomeFirstResponder];&#125;- (BOOL)canBecomeFirstResponder &#123; if ([self.rowDescriptor.rowType isEqualToString:XLFormRowDescriporTypeComplexArea])&#123; return YES; &#125; return [super canBecomeFirstResponder];&#125;#pragma mark - Properties- (UIPickerView *)pickerView &#123; if (_pickerView) return _pickerView; _pickerView = [[UIPickerView alloc] init]; _pickerView.delegate = self; _pickerView.dataSource = self; _pickerView.backgroundColor = HEXCOLOR(0xFFFFFF); return _pickerView;&#125;#pragma mark - XLFormDescriptorCell é…ç½®cell- (void)configure &#123; [super configure]; self.currentProvinceId = self.currentCityId = self.currentAreaId = -1; [self setSelectionStyle:UITableViewCellSelectionStyleNone]; [self setupUI]; [self makeConstraint];&#125;- (void)setupUI &#123; [self.contentView addSubview:self.textLabel]; [self.contentView addSubview:self.textField]; [self.contentView addSubview:self.accessorry];&#125;- (void)makeConstraint &#123; [self.textLabel mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.top.equalTo(self.contentView).offset(5); make.left.equalTo(self.contentView).offset(20); make.right.equalTo(self.contentView).offset(-20); &#125;]; [self.textField mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.top.equalTo(self.textLabel.mas_bottom).offset(10); make.left.equalTo(self.textLabel); make.right.equalTo(self.textLabel); make.height.mas_equalTo(44); make.bottom.equalTo(self.contentView).offset(-5); &#125;]; [self.accessorry mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.centerY.equalTo(self.textField); make.right.equalTo(self.textField.mas_right).offset(-5); &#125;];&#125;- (void)update &#123; [super update]; if ([self.rowDescriptor.rowType isEqualToString:XLFormRowDescriporTypeComplexArea])&#123; self.textField.autocorrectionType = UITextAutocorrectionTypeDefault; self.textField.autocapitalizationType = UITextAutocapitalizationTypeSentences; &#125; self.textField.text = self.areaString ? self.areaString : @"è¯·é€‰æ‹©"; [self.textField setEnabled:!self.rowDescriptor.isDisabled]; self.textField.leftView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 12, self.textField.frame.size.height)]; self.textField.textColor = HEXCOLOR(0x000000); self.textField.leftViewMode = UITextFieldViewModeAlways; self.textField.layer.borderColor = HEXCOLOR(0xCCCCCC).CGColor; self.textField.layer.borderWidth = 1; self.textField.font = [UIFont systemFontOfSize:15]; self.textField.textAlignment = NSTextAlignmentCenter; self.textField.enabled = NO;&#125;- (NSInteger)numberOfComponentsInPickerView:(UIPickerView*)pickerView &#123; return 3;&#125;- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component &#123; return 3;&#125;- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component &#123; return @"test";&#125;- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component &#123; self.textField.text = @"test_a";&#125;- (CGFloat)pickerView:(UIPickerView *)pickerView rowHeightForComponent:(NSInteger)component &#123; return 44;&#125;- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(nullable UIView *)view &#123; //è®¾ç½®åˆ†å‰²çº¿çš„é¢œè‰² for(UIView *singleLine in pickerView.subviews) &#123; if (singleLine.frame.size.height &lt; 1) &#123; singleLine.backgroundColor = HEXCOLOR(0xCCCCCC); &#125; &#125; //è®¾ç½®æ–‡å­—çš„å±žæ€§ UILabel *genderLabel = [UILabel new]; genderLabel.textAlignment = NSTextAlignmentCenter; genderLabel.text = [self pickerView:pickerView titleForRow:row forComponent:component]; genderLabel.font = [UIFont systemFontOfSize:20]; return genderLabel;&#125;#pragma mark - Helpers- (NSInteger)selectedIndex &#123; if (self.rowDescriptor.value)&#123; for (id option in self.rowDescriptor.selectorOptions)&#123; if ([[option valueData] isEqual:[self.rowDescriptor.value valueData]])&#123; return [self.rowDescriptor.selectorOptions indexOfObject:option]; &#125; &#125; &#125; return -1;&#125;-(UILabel *)textLabel &#123; if (_textLabel) return _textLabel; _textLabel = [UILabel autolayoutView]; _textLabel.textAlignment = NSTextAlignmentRight; return _textLabel;&#125;- (UITextField *)textField &#123; if(_textField) return _textField; _textField = [UITextField autolayoutView]; return _textField;&#125;- (UIImageView *)accessorry &#123; if(_accessorry) return _accessorry; _accessorry = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"pullDown"]]; return _accessorry;&#125;#pragma mark - cellçš„ç‚¹å‡»è§¦å‘äº‹ä»¶-(void)formDescriptorCellDidSelectedWithFormController:(XLFormViewController *)controller &#123; self.textField.text = [NSString stringWithFormat:@"%@-%@-%@",provinceName,cityName,areaName];&#125;@end ComplexFactory.m æ”¹é€ 123456789101112131415- (void)initForm &#123; XLFormSectionDescriptor * companySection = [XLFormSectionDescriptor formSectionWithTitle:kCompanyInfo]; [companySection addFormRow:[self rowFactoryWithWithTitle:@"* åœ°åŒº" tag:kArea required:YES rowType:XLFormRowDescriporTypeComplexArea placeholder:@"è¯·é€‰æ‹©"]]; [self.form addFormSection:companySection]; XLFormSectionDescriptor * contactSection = [XLFormSectionDescriptor formSectionWithTitle:kContactInfo]; [self.form addFormSection:contactSection];&#125; å¥½äº† ,å†æ¥çœ‹ä¸€ä¸‹æ•ˆæžœ åœ°å€æ•°æ®ç”¨åˆ°äº†ç¬¬ä¸‰æ–¹ YYModel æ¨¡åž‹ç¼–å†™IVModel.h123456789101112131415161718192021222324252627282930#import &lt;Foundation/Foundation.h&gt;@interface IAreaModel : NSObject/** id */@property (nonatomic, strong) NSNumber *ID;/** name */@property (nonatomic, strong) NSString *name;/** level */@property (nonatomic, strong) NSString *level;/** parent_id */@property (nonatomic, strong) NSString *parent_id;@end@interface ICityModel : NSObject/** id */@property (nonatomic, strong) NSNumber *ID;/** name */@property (nonatomic, strong) NSString *name;/** level */@property (nonatomic, strong) NSString *level;/** parent_id */@property (nonatomic, strong) NSString *parent_id;/** aereList */@property (nonatomic, strong) NSArray&lt;IAreaModel *&gt; *areaList;@end IVModel.m1234567891011121314151617181920212223242526272829303132333435363738394041424344#import "IVModel.h"@implementation IVModel : NSObject// è¿”å›žå®¹å™¨ç±»ä¸­çš„æ‰€éœ€è¦å­˜æ”¾çš„æ•°æ®ç±»åž‹ (ä»¥ Class æˆ– Class Name çš„å½¢å¼)ã€‚+ (NSDictionary *)modelContainerPropertyGenericClass &#123; return @&#123;@"citylist" : [IModel class]&#125;;&#125;@end@implementation IModel : NSObject+ (NSDictionary *)modelCustomPropertyMapper &#123; return @&#123;@"ID" : @"id"&#125;;&#125;// è¿”å›žå®¹å™¨ç±»ä¸­çš„æ‰€éœ€è¦å­˜æ”¾çš„æ•°æ®ç±»åž‹ (ä»¥ Class æˆ– Class Name çš„å½¢å¼)ã€‚+ (NSDictionary *)modelContainerPropertyGenericClass &#123; return @&#123;@"areaList" : [ICityModel class]&#125;;&#125;@end@implementation IAreaModel+ (NSDictionary *)modelCustomPropertyMapper &#123; return @&#123;@"ID" : @"id"&#125;;&#125;@end@implementation ICityModel+ (NSDictionary *)modelCustomPropertyMapper &#123; return @&#123;@"ID" : @"id"&#125;;&#125;// è¿”å›žå®¹å™¨ç±»ä¸­çš„æ‰€éœ€è¦å­˜æ”¾çš„æ•°æ®ç±»åž‹ (ä»¥ Class æˆ– Class Name çš„å½¢å¼)ã€‚+ (NSDictionary *)modelContainerPropertyGenericClass &#123; return @&#123;@"areaList" : [IAreaModel class]&#125;;&#125;@end æ•°æ®æ–‡ä»¶åŠè§£æžæ–¹æ³•viewController ä¸­æ·»åŠ èŽ·å–æ•°æ®çš„æ–¹æ³•.12345- (void)loadData &#123; NSString *str = [[NSBundle mainBundle] pathForResource:@"json" ofType:@"txt"]; NSDictionary *result = [NSJSONSerialization JSONObjectWithData:[NSData dataWithContentsOfFile:str] options:0 error:NULL]; self.factory.provinceModel = [IVModel yy_modelWithDictionary:result];&#125; è‡ªå®šä¹‰cellçš„æ”¹é€ ComplexAreaCell.m123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358#import "ComplexAreaCell.h"#import &lt;XLForm/XLForm.h&gt;#import "IVModel.h"NSString * const XLFormRowDescriporTypeComplexArea = @"XLFormRowDescriporTypeComplexArea";@interface ComplexAreaCell()&lt;UIPickerViewDelegate, UIPickerViewDataSource&gt;/** pickView */@property (nonatomic, strong) UIPickerView *pickerView;/** ids */@property (nonatomic, copy) NSString *areaString;//æ•°æ®æ¨¡åž‹@property (nonatomic, strong) IVModel *provinceModel;/** provinceæ¨¡åž‹æ•°ç»„ */@property (nonatomic, strong) NSArray&lt;IModel *&gt; *provinceModelArray;/** cityæ¨¡åž‹æ•°ç»„ */@property (nonatomic, strong) NSArray&lt;ICityModel *&gt; *cityModelArray;/** areaæ¨¡åž‹æ•°ç»„ */@property (nonatomic, strong) NSArray&lt;IAreaModel *&gt; *areaModelArray;/** province ID */@property (nonatomic,assign) NSInteger currentProvinceId;/** city ID */@property (nonatomic,assign) NSInteger currentCityId;/** area ID */@property (nonatomic,assign) NSInteger currentAreaId;@end@implementation ComplexAreaCell@synthesize textLabel = _textLabel;@synthesize textField = _textField;@synthesize accessorry = _accessorry;// åœ¨ä¸»è¡¨å•ä¸­åŠ å…¥ä¸€ç»„Key Value è‡ªå®šä¹‰çš„å¿…é¡»é‡å†™+ (void)load &#123; [XLFormViewController.cellClassesForRowDescriptorTypes setObject:[self class] forKey:XLFormRowDescriporTypeComplexArea];&#125;- (UIView *)inputView &#123; if ([self.rowDescriptor.rowType isEqualToString:XLFormRowDescriporTypeComplexArea])&#123; return self.pickerView; &#125; return [super inputView];&#125;- (BOOL)formDescriptorCellCanBecomeFirstResponder &#123; return (!self.rowDescriptor.isDisabled &amp;&amp; ([self.rowDescriptor.rowType isEqualToString:XLFormRowDescriporTypeComplexArea]));&#125;- (BOOL)formDescriptorCellBecomeFirstResponder &#123; return [self becomeFirstResponder];&#125;- (BOOL)canBecomeFirstResponder &#123; if ([self.rowDescriptor.rowType isEqualToString:XLFormRowDescriporTypeComplexArea])&#123; return YES; &#125; return [super canBecomeFirstResponder];&#125;#pragma mark - Properties- (UIPickerView *)pickerView &#123; if (_pickerView) return _pickerView; _pickerView = [[UIPickerView alloc] init]; _pickerView.delegate = self; _pickerView.dataSource = self; _pickerView.backgroundColor = HEXCOLOR(0xFFFFFF); return _pickerView;&#125;#pragma mark - XLFormDescriptorCell é…ç½®cell- (void)configure &#123; [super configure]; self.currentProvinceId = self.currentCityId = self.currentAreaId = -1; [self setSelectionStyle:UITableViewCellSelectionStyleNone]; [self setupUI]; [self makeConstraint];&#125;- (void)setupUI &#123; [self.contentView addSubview:self.textLabel]; [self.contentView addSubview:self.textField]; [self.contentView addSubview:self.accessorry];&#125;- (void)makeConstraint &#123; [self.textLabel mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.top.equalTo(self.contentView).offset(5); make.left.equalTo(self.contentView).offset(20); make.right.equalTo(self.contentView).offset(-20); &#125;]; [self.textField mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.top.equalTo(self.textLabel.mas_bottom).offset(10); make.left.equalTo(self.textLabel); make.right.equalTo(self.textLabel); make.height.mas_equalTo(44); make.bottom.equalTo(self.contentView).offset(-5); &#125;]; [self.accessorry mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.centerY.equalTo(self.textField); make.right.equalTo(self.textField.mas_right).offset(-5); &#125;];&#125;- (void)titleHighLight &#123; NSString *title = self.rowDescriptor.title; self.textLabel.font = [UIFont fontWithName:@"HelveticaNeue" size:12]; NSMutableAttributedString *str = [[NSMutableAttributedString alloc] initWithString:[NSString stringWithFormat:@"%@",title]]; NSMutableParagraphStyle *paragraphStyle = [[NSMutableParagraphStyle alloc] init]; // é¦–è¡Œç¼©è¿› paragraphStyle.alignment = NSTextAlignmentLeft; if([title rangeOfString:@"*"].location != NSNotFound) &#123; [str addAttribute:NSForegroundColorAttributeName value:[UIColor redColor] range:NSMakeRange(0,1)]; &#125; [str addAttribute:NSParagraphStyleAttributeName value:paragraphStyle range:NSMakeRange(0, [title length])]; [str addAttribute:NSFontAttributeName value:[UIFont fontWithName:@"HelveticaNeue" size:12] range:NSMakeRange(0, [title length])]; self.textLabel.attributedText = str; &#125;- (void)update &#123; [super update]; if ([self.rowDescriptor.rowType isEqualToString:XLFormRowDescriporTypeComplexArea])&#123; self.textField.autocorrectionType = UITextAutocorrectionTypeDefault; self.textField.autocapitalizationType = UITextAutocapitalizationTypeSentences; &#125; [self titleHighLight]; self.textField.text = self.areaString ? self.areaString : @"è¯·é€‰æ‹©"; [self.textField setEnabled:!self.rowDescriptor.isDisabled]; self.textField.leftView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 12, self.textField.frame.size.height)]; self.textField.textColor = HEXCOLOR(0x000000); self.textField.leftViewMode = UITextFieldViewModeAlways; self.textField.layer.borderColor = HEXCOLOR(0xCCCCCC).CGColor; self.textField.layer.borderWidth = 1; self.textField.font = [UIFont systemFontOfSize:15]; self.textField.textAlignment = NSTextAlignmentCenter; self.textField.enabled = NO; [self preSelectedValue];&#125;/** è®¾ç½®æ¯æ¬¡åº”è¯¥é»˜è®¤é€‰ä¸­çš„é¡¹ */- (void)preSelectedValue &#123; if(!self.rowDescriptor.value) return; NSString __block *provinceName,__block *cityName,__block *areaName ; NSString *ids = nil; if([self.rowDescriptor.value isKindOfClass:[XLFormOptionsObject class]]) &#123; ids = [self.rowDescriptor.value formValue]; &#125;else&#123; ids = self.rowDescriptor.value; &#125; if(!ids) return; NSArray *idss = [ids componentsSeparatedByString:@"-"]; if(!idss) return; if(!self.provinceModelArray) return; [self.provinceModelArray enumerateObjectsUsingBlock:^(IModel * _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) &#123; if([obj.ID integerValue] == [idss[0] integerValue]) &#123; self.currentProvinceId = idx; provinceName = obj.name; *stop = YES; &#125; [obj.areaList enumerateObjectsUsingBlock:^(ICityModel * _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) &#123; if([obj.ID integerValue] == [idss[1] integerValue]) &#123; self.currentCityId = idx; cityName = obj.name; *stop = YES; &#125; [obj.areaList enumerateObjectsUsingBlock:^(IAreaModel * _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) &#123; if([obj.ID integerValue] == [idss[2] integerValue]) &#123; self.currentAreaId = idx; areaName = obj.name; *stop = YES; &#125; &#125;]; &#125;]; &#125;]; self.textField.text = [NSString stringWithFormat:@"%@-%@-%@",provinceName,cityName,areaName];&#125;- (NSInteger)numberOfComponentsInPickerView:(UIPickerView*)pickerView &#123; return 3;&#125;- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component &#123; if (0 == component) &#123; return self.provinceModelArray.count; &#125; else if (1 == component) &#123; NSInteger rowProvince = [pickerView selectedRowInComponent:0]; self.cityModelArray = self.provinceModelArray[rowProvince].areaList; if(self.currentProvinceId &gt;= 0) &#123; self.cityModelArray = self.provinceModelArray[self.currentProvinceId].areaList; &#125; return self.cityModelArray.count &gt; 0 ? self.cityModelArray.count : 1; &#125; else &#123; NSInteger rowProvince1 = [pickerView selectedRowInComponent:1]; self.areaModelArray = self.cityModelArray[rowProvince1].areaList; if(self.currentCityId &gt;= 0) &#123; self.areaModelArray = self.cityModelArray[self.currentCityId].areaList; &#125; return self.areaModelArray.count &gt; 0 ? self.areaModelArray.count : 1; &#125;&#125;- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component &#123; if (0 == component) &#123; return self.provinceModelArray[row].name; &#125; else if(1 == component)&#123; if(self.cityModelArray.count == 1) return self.cityModelArray[0].name; return self.cityModelArray[row].name; &#125;else&#123; if(self.areaModelArray.count == 1) return self.areaModelArray[0].name; return self.areaModelArray[row].name; &#125;&#125;- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component &#123; self.currentProvinceId = [self.pickerView selectedRowInComponent:0]; self.currentCityId = [self.pickerView selectedRowInComponent:1]; self.currentAreaId = [self.pickerView selectedRowInComponent:2]; switch (component) &#123; case 0: self.currentCityId = 0; self.cityModelArray = nil; self.cityModelArray = self.provinceModelArray[self.currentProvinceId].areaList; [self.pickerView reloadComponent:1]; [self.pickerView reloadComponent:2]; //è®©åˆ·æ–°åŽçš„ç¬¬ä¸€å’ŒäºŒ ä¸ªæ»šè½®é‡æ–°å›žåˆ°ç¬¬ä¸€è¡Œ [self.pickerView selectRow:0 inComponent:1 animated:YES]; [self.pickerView selectRow:0 inComponent:2 animated:YES]; break; case 1: self.currentAreaId = 0; self.areaModelArray = nil; self.areaModelArray = self.cityModelArray[self.currentCityId].areaList; [self.pickerView reloadComponent:2]; //è®©åˆ·æ–°åŽçš„ç¬¬äºŒä¸ªæ»šè½®é‡æ–°å›žåˆ°ç¬¬ä¸€è¡Œ [self.pickerView selectRow:0 inComponent:2 animated:YES]; break; default: break; &#125; // èŽ·å–åŸŽå¸‚ID NSString *procinveID = [self.provinceModelArray[[self.pickerView selectedRowInComponent:0]].ID stringValue]; NSString *cityID = [self.cityModelArray[[self.pickerView selectedRowInComponent:1]].ID stringValue]; NSString *areaID = [self.areaModelArray[[self.pickerView selectedRowInComponent:2]].ID stringValue]; // è®°å½•å½“å‰é€‰ä¸­è¡Œ self.currentProvinceId = [self.pickerView selectedRowInComponent:0]; self.currentCityId = [self.pickerView selectedRowInComponent:1]; self.currentAreaId = [self.pickerView selectedRowInComponent:2]; // èŽ·å–åŸŽå¸‚åå­— NSString *provinceName = self.provinceModelArray[[self.pickerView selectedRowInComponent:0]].name; NSString *cityName = self.cityModelArray[[self.pickerView selectedRowInComponent:1]].name; NSString *areaName = self.areaModelArray[[self.pickerView selectedRowInComponent:2]].name; self.rowDescriptor.value = [NSString stringWithFormat:@"%@-%@-%@",procinveID,cityID,areaID]; self.textField.text = [NSString stringWithFormat:@"%@-%@-%@",provinceName,cityName,areaName]; self.areaString = [NSString stringWithFormat:@"%@-%@-%@",provinceName,cityName,areaName];&#125;- (CGFloat)pickerView:(UIPickerView *)pickerView rowHeightForComponent:(NSInteger)component &#123; return 44;&#125;- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(nullable UIView *)view &#123; //è®¾ç½®åˆ†å‰²çº¿çš„é¢œè‰² for(UIView *singleLine in pickerView.subviews) &#123; if (singleLine.frame.size.height &lt; 1) &#123; singleLine.backgroundColor = HEXCOLOR(0xCCCCCC); &#125; &#125; //è®¾ç½®æ–‡å­—çš„å±žæ€§ UILabel *genderLabel = [UILabel new]; genderLabel.textAlignment = NSTextAlignmentCenter; genderLabel.text = [self pickerView:pickerView titleForRow:row forComponent:component]; genderLabel.font = [UIFont systemFontOfSize:20]; return genderLabel;&#125;#pragma mark - Helpers- (NSInteger)selectedIndex &#123; if (self.rowDescriptor.value)&#123; for (id option in self.rowDescriptor.selectorOptions)&#123; if ([[option valueData] isEqual:[self.rowDescriptor.value valueData]])&#123; return [self.rowDescriptor.selectorOptions indexOfObject:option]; &#125; &#125; &#125; return -1;&#125;-(UILabel *)textLabel &#123; if (_textLabel) return _textLabel; _textLabel = [UILabel autolayoutView]; _textLabel.textAlignment = NSTextAlignmentRight; return _textLabel;&#125;- (UITextField *)textField &#123; if(_textField) return _textField; _textField = [UITextField autolayoutView]; return _textField;&#125;- (UIImageView *)accessorry &#123; if(_accessorry) return _accessorry; _accessorry = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"pullDown"]]; return _accessorry;&#125;#pragma mark - æ•°æ®è®¾ç½®- (void)setProvinceModel:(IVModel *)provinceModel &#123; _provinceModel = provinceModel; self.provinceModelArray = _provinceModel.citylist; [self.pickerView reloadAllComponents];&#125;#pragma mark - cellçš„ç‚¹å‡»è§¦å‘äº‹ä»¶-(void)formDescriptorCellDidSelectedWithFormController:(XLFormViewController *)controller &#123; NSString *provinceName, *cityName, *areaName ; if(self.currentProvinceId &gt;= 0) &#123; [self.pickerView selectRow:self.currentProvinceId inComponent:0 animated:NO]; provinceName = self.provinceModelArray[self.currentProvinceId].name; self.cityModelArray = self.provinceModelArray[self.currentProvinceId].areaList; &#125; if(self.currentCityId &gt;= 0) &#123; [self.pickerView selectRow:self.currentCityId inComponent:1 animated:NO]; cityName = self.cityModelArray[self.currentCityId].name; self.areaModelArray = self.cityModelArray[self.currentCityId].areaList; &#125; if(self.currentAreaId &gt;= 0) &#123; [self.pickerView selectRow:self.currentAreaId inComponent:2 animated:NO]; areaName = self.areaModelArray[self.currentAreaId].name; &#125; if(!provinceName &amp;&amp; !cityName &amp;&amp; !areaName) &#123; return; &#125; // ä¸ºäº†ç¬¬ä¸€æ¬¡ç‚¹å‡»cellçš„æ—¶å€™è®¾ç½®value NSString *procinveID = [self.provinceModelArray[[self.pickerView selectedRowInComponent:0]].ID stringValue]; NSString *cityID = [self.cityModelArray[[self.pickerView selectedRowInComponent:1]].ID stringValue]; NSString *areaID = [self.areaModelArray[[self.pickerView selectedRowInComponent:2]].ID stringValue]; self.rowDescriptor.value = [NSString stringWithFormat:@"%@-%@-%@",procinveID,cityID,areaID]; self.textField.text = [NSString stringWithFormat:@"%@-%@-%@",provinceName,cityName,areaName]; self.areaString = [NSString stringWithFormat:@"%@-%@-%@",provinceName,cityName,areaName];&#125;@end è¡¨å•åˆ›å»ºç±» ComplexFactoryComplexFactory.h ä¸­å¢žåŠ è®°å½•åœ°å€æ•°æ®çš„å±žæ€§12/** IVModel åŸŽå¸‚è”åŠ¨æ•°æ®æ¨¡åž‹ */@property (nonatomic, strong) IVModel *provinceModel; ComplexFactory.m ä¸­é€šè¿‡ kvc èµ‹å€¼ provinceModel åœ°å€æ•°æ®.12345678910111213141516- (XLFormRowDescriptor *)rowFactoryWithWithTitle:(NSString *)headerTitle tag:(NSString *)tag required:(BOOL)required rowType:(NSString *)rowType placeholder:(NSString *)placeholder &#123; XLFormRowDescriptor *row; row = [XLFormRowDescriptor formRowDescriptorWithTag:tag rowType:rowType]; if(tag == kArea) &#123; [row.cellConfig setValue:self.provinceModel forKey:@"provinceModel"]; &#125; if(required) &#123; row.requireMsg = @"å¸¦*ä¸ºå¿…å¡«!"; &#125; row.required = required; row.title = headerTitle; row.height = UITableViewAutomaticDimension; return row;&#125; æ•°æ®éªŒè¯å™¨ComplexRegValidator.m çš„éªŒè¯æ–¹æ³•.123+ (XLFormValidator *)areaValidator &#123; return [XLFormRegexValidator formRegexValidatorWithMsg:NSLocalizedString(@"è¯·é€‰æ‹©åœ°å€", nil) regex:@"^((?!è¯·é€‰æ‹©).)*$"];&#125; ComplexFactory.m123......[row addValidator:[ComplexRegValidator areaValidator]];...... ComplexValidator.m123456......if ([validationStatus.rowDescriptor.tag isEqualToString:kArea] &amp;&amp; !validationStatus.isValid) &#123; *stop = YES; // show hud .... &#125;...... å¥½äº†,ç»“æŸäº†.æ¥çœ‹ä¸€ä¸‹ gif è¡¥ä¸Šæœ€æƒ³è¦çš„ Demo]]></content>
      <categories>
        <category>XLForm</category>
      </categories>
      <tags>
        <tag>XLForm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hexoå›¾åºŠä¹‹ä¸ƒç‰›äº‘]]></title>
    <url>%2F2017%2F06%2F13%2Fqiniuyun%2F</url>
    <content type="text"><![CDATA[ä¸ºä»€ä¹ˆä½¿ç”¨ä¸ƒç‰›äº‘å†™ MarkDown ä½¿ç”¨ Sublime Text ,å¯é…åˆä½¿ç”¨ æ•°æ®åŒæ­¥æ’ä»¶,æ–¹ä¾¿. ä¼˜ç‚¹: ç›¸å¯¹äºŽç›´æŽ¥éƒ¨ç½² hexo d åˆ° github æ¥è¯´è®¿é—®é€Ÿåº¦æ›´å¿«. ç©ºé—´å¤§ ç¨³å®š ä¸ƒç‰›äº‘ç©ºé—´è®¾ç½®1.æ³¨å†Œä¸ƒç‰›äº‘è´¦æˆ· 2.åˆ›å»ºä¸ƒç‰›äº‘å­˜å‚¨ç©ºé—´ 3.ç‚¹å‡»é¡µé¢å³ä¸Šè§’å¤´åƒâ†’è¿›å…¥â€å¯†é’¥ç®¡ç†â€œâ†’å¤åˆ¶å½“å‰ä½¿ç”¨ä¸­çš„AKå’ŒSKï¼Œå¾…ä¼šè®¾ç½®æ’ä»¶æ—¶ä¼šç”¨åˆ°. è®¾ç½® hexo-qiniu-sync æ’ä»¶1.å®‰è£…æ’ä»¶:åœ¨hexoä¸»ç›®å½•ä¸‹è¿è¡Œä»¥ä¸‹å‘½ä»¤: npm install hexo-qiniu-sync --save hexo-qiniu-sync github 2.æ·»åŠ æ’ä»¶é…ç½®åˆ°ç«™ç‚¹é…ç½®æ–‡ä»¶ _config.yml plugins: hexo-qiniu-sync qiniu: offline: false sync: true bucket: image access_key: ak secret_key: sk dirPrefix: urlPrefix: http://paj20wmcz.bkt.clouddn.com local_dir: cdn update_exist: true image: folder: images js: folder: js css: folder: css å‡ ä¸ªéœ€è¦ä¿®æ”¹çš„åœ°æ–¹: bucket: ä¿®æ”¹ä¸ºä½ åˆšæ‰ç”³è¯·çš„ä¸ƒç‰›ç©ºé—´åç§°access_key secret_key:ä¸Šä¼ å¯†é’¥AccessKeyã€SecretKey.å³3 ç¬¬3æ­¥å¤åˆ¶çš„AKå’ŒSK.urlPrefix: ä¸ƒç‰›ç©ºé—´åœ°å€çš„å‰ç¼€.é‡è¦ï¼å¿…å¡«ï¼ http://paj20wmcz.bkt.clouddn.com ä½ å¯ä»¥è¿›å…¥è‡ªå·±åˆ›å»ºçš„ç©ºé—´åœ¨åŸŸåè®¾ç½®ä¸­çœ‹åˆ°è‡ªå·±çš„ä¸ƒç‰›æµ‹è¯•åŸŸå,è¿™ä¸ªå‚æ•°çš„è®¾ç½®æ˜¯ä¿è¯è§£æžæˆç½‘é¡µæ–‡ä»¶æ—¶ï¼Œå¤–é“¾åœ°å€æ­£ç¡®çš„å…³é”®ä¹‹ä¸€ï¼ å‚æ•°è¯´æ˜Ž offline :æ˜¯å¦ç¦»çº¿.è®¾ç½®ä¸º true å°†åœ¨æœ¬åœ°é¢„è§ˆæ—¶ä½¿ç”¨æœ¬åœ°åœ°å€æ¸²æŸ“ï¼Œçœæµé‡ false å°†ä½¿ç”¨åŒæ­¥åˆ°ä¸ƒç‰›ç©ºé—´çš„é™æ€èµ„æºæ¸²æŸ“ï¼Œæ–¹ä¾¿æ£€æŸ¥èµ„æºé“¾æŽ¥æ˜¯å¦æ­£ç¡®. sync :æ˜¯å¦åŒæ­¥åˆ°ä¸ƒç‰›ï¼Œä¸€èˆ¬éƒ½æ˜¯è®¾ç½® true . dirPrefix :èµ„æºå°†ä¸Šä¼ åˆ°ä¸ƒç‰›ç©ºé—´çš„æ­¤ç›®å½•ä¸‹ï¼Œå¯åƒæˆ‘ä¸€æ ·è®¾ç½®ä¸ºç©º.è¯¥å‚æ•°ä¼šå½±å“å¤–é“¾çš„åœ°å€ï¼Œå¦‚æžœè®¾ç½®ä¸ºéžç©ºå€¼ï¼Œä¾‹å¦‚é»˜è®¤å€¼ static ï¼Œåˆ™ urlPrefix ä¸ºä¿æŒä¸€è‡´éœ€åŠ ä¸Šç›®å½•åŽç¼€ /static ï¼Œæ”¹ä¸º http://paj20wmcz.bkt.clouddn.com/static . local_dir :æœ¬åœ°èµ„æºå‚¨å­˜ç›®å½•.åœ¨æœ¬ä¾‹ä¸­ï¼Œå¾…ä¸Šä¼ çš„èµ„æºéƒ½å‚¨å­˜åœ¨ hexo ä¸»ç›®å½•ä¸­çš„ cdn æ–‡ä»¶å¤¹ï¼ˆä¹Ÿå°±æ˜¯ä¸Ž source ç›®å½•å¹³çº§ï¼‰ä¸­. update_exist :è®¾ç½®ä¸º true ï¼Œåˆ™ä¼šåœ¨æ–‡ä»¶æ›´æ–°ä¹‹åŽé‡æ–°ä¸Šä¼ å¹¶æ›´æ–°ä¸ƒç‰›ç©ºé—´ä¸Šä¸­çš„åŽŸæœ‰æ–‡ä»¶. image/js/css :å­å‚æ•° folder ä¸ºä¸åŒé™æ€èµ„æºç§ç±»çš„ç›®å½•åç§°ï¼Œä¸€èˆ¬ä¸éœ€è¦æ”¹åŠ¨ é…ç½®æœ¬åœ°ç›®å½•æœ¬åœ°ç›®å½•åç§°éœ€è¦ä¸Ž local_dir å‚æ•°çš„å€¼ä¸€è‡´ã€‚æ‰€ä»¥åœ¨ hexo ä¸»ç›®å½• ä¸‹æ–°å»ºä¸Ž source å¹³çº§çš„ç›®å½• cdn ï¼Œç”¨äºŽå­˜æ”¾éœ€è¦ä¸Šä¼ åˆ°ä¸ƒç‰›çš„èµ„æºã€‚ åœ¨ cdn ç›®å½•ä¸‹åˆ›å»ºå­ç›®å½•ï¼š css ã€ images ã€ js ï¼Œä¸Ž image/js/css å­å‚æ•° folder ä¿æŒä¸€è‡´ï¼Œå¾…ä¸Šä¼ çš„ cssã€imageã€js æ–‡ä»¶åº”è¯¥å­˜å‚¨åˆ°ç›¸åº”å­ç›®å½•ã€‚ä¹Ÿå¯æ–°å»ºå…¶ä»–å­ç›®å½•,ç”¨äºŽä¸åŒæ–‡ä»¶ç±»åž‹çš„å­˜æ”¾ Hexoä¸»ç›®å½•ç»“æž„å¦‚ä¸‹ï¼š â”œâ”€.deploy_git â”œâ”€cdn â”‚ â”œâ”€css â”‚ â”œâ”€images â”‚ â””â”€js â”œâ”€node_modules â”œâ”€public â”œâ”€scaffolds â”œâ”€source â””â”€theme MarkDown ä¸­å¦‚ä½•ä½¿ç”¨ä¸ƒç‰›èµ„æº?è¿™é‡Œæ­£å¥½ä½¿ç”¨åˆ°äº†ä¹‹å‰å®‰è£…çš„æ’ä»¶ æ’å…¥å›¾ç‰‡èµ„æº1&#123;% qnimg xxx.png %&#125; é«˜çº§ä¸€ç‚¹çš„ç”¨æ³•1&#123;% qnimg xxxx.png title:æ ‡é¢˜ alt:è¯´æ˜Ž 'class:class1 class2' %&#125;]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>ä¸ƒç‰›äº‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS ä¸€ä¸ªç‰ˆæœ¬å¤šæ¸ é“åˆ†äº« - ä½¿ç”¨OpenInstall]]></title>
    <url>%2F2017%2F06%2F11%2Fmulti-channe%2F</url>
    <content type="text"><![CDATA[äº§å“éœ€æ±‚ä¸€ä¸ª ipa åŒ…é€‚åº”å¤šä¸ªæ¸ é“åˆ†äº«. è°ƒç ”æ–¹æ¡ˆæœ€ç»ˆé€‰æ‹© OpenInstall æœ€ç»ˆä½¿ç”¨ä¸­å‘çŽ°,å¹¶ä¸èƒ½æ»¡è¶³éœ€æ±‚,åªæœ‰å®‰è£…å®Œæ¸ é“åŒ…AppåŽçš„ç¬¬ä¸€æ¬¡å¯åŠ¨æ‰ä¼šèµ° OpenInstall çš„å›žè°ƒæ–¹æ³•,æ‰€ä»¥ æ‰‘è¡— . çŒœæƒ³: æ˜¯å¦å¯ä»¥ä»Ž OpenInstall æœ¬èº«å…¥æ‰‹.OpenInstall æ˜¯å¦æœ‰è®°å½•æ˜¯å¦ç¬¬ä¸€æ¬¡å¯åŠ¨çš„ç›¸å…³æ–‡ä»¶? å®žæ–½: æ¨¡æ‹Ÿå™¨æ–¹æ¡ˆæ”¾å¼ƒ,æ— æ³•æ‰«æäºŒç»´ç .ðŸ˜“ 1.è¿žæŽ¥çœŸæœºè°ƒè¯•,æŸ¥çœ‹æ²™ç›’æ–‡ä»¶ Window-&gt;Devices 2.å¯¼å‡º App æ²™ç›’å†…å®¹ 3.æŸ¥çœ‹æ²™ç›’æ•°æ® 4.æŸ¥çœ‹ç”¨æˆ·åå¥½è®¾ç½®AppData â€“&gt; Library â€“&gt; Preferences â€“&gt; yourBundleId.plist æœ€ç»ˆæ‰¾åˆ°å¦‚ä¸‹ key openinstall_firstLaunch äºŽæ˜¯å°è¯•è®¾ç½®ä¸º NO 12345678910111213141516171819202122232425262728293031323334353637383940414243//é€šè¿‡OpenInstall èŽ·å–è‡ªå®šä¹‰å‚æ•°ï¼Œæ•°æ®ä¸ºç©ºæ—¶ä¹Ÿä¼šå›žè°ƒæ­¤æ–¹æ³•ã€‚æ¸ é“ç»Ÿè®¡è¿”å›žå‚æ•°åç§°ä¸º openinstallChannelCode- (void)getInstallParamsFromOpenInstall:(NSDictionary *) params withError: (NSError *) error &#123; if (!error) &#123; if (params) &#123; if ([params.allKeys containsObject:@"channels"]) &#123; [GlobalModel defaultModel].channelName = params[@"channels"]; &#125;else&#123; [GlobalModel defaultModel].channelName = String(params.allValues.firstObject); &#125; NSString *paramsStr = [NSString stringWithFormat:@"channelName = %@",[GlobalModel defaultModel].channelName]; UIAlertController *alert = [UIAlertController alertControllerWithTitle:@"æˆ‘æ˜¯" message:paramsStr preferredStyle: UIAlertControllerStyleAlert]; [alert addAction:[UIAlertAction actionWithTitle:@"ç¡®å®š" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) &#123; &#125;]]; /// å¼¹å‡ºæç¤ºæ¡†(ä¾¿äºŽè°ƒè¯•ï¼Œè°ƒè¯•å®ŒæˆåŽåˆ é™¤æ­¤ä»£ç ) [self.window.rootViewController presentViewController:alert animated:true completion:nil]; &#125; /** * äº‹å®žä¸Š , å½“å›ž openinstall è°ƒå®ŒæˆåŽ , åå¥½è®¾ç½®å·²ç»å­˜å‚¨äº† channelName, å³å¯é‡ç½® openinstall çš„å¯åŠ¨çŠ¶æ€. * è¿™æ · åšçš„åŽŸå› æ˜¯ , æ¯æ¬¡app å¯åŠ¨éƒ½å¯ä»¥æŽ¥æ”¶åˆ° openinstall sdk å‘ openinstall æœåŠ¡å™¨ è¯·æ±‚ channelName æ•°æ®(å¦‚æžœæœ‰è¿™ä¸ªæ•°æ®çš„è¯) * å½“ç„¶ æ²¡æœ‰æ•°æ®çš„æ—¶å€™ æ˜¯ä¸èµ°è¿™ä¸ª æ–¹æ³•çš„ * è¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº† é€‚åº” ä¸€ä¸ªç‰ˆæœ¬ä¸‹ N ä¸ªæ¸ é“... */ NSUserDefaults *openinstallData = [NSUserDefaults standardUserDefaults]; [openinstallData setBool:NO forKey:@"openinstall_firstLaunch"]; [openinstallData synchronize]; &#125; else &#123; NSString *paramsStr = [NSString stringWithFormat:@"channelName = %@",[GlobalModel defaultModel].channelName ?: @"æ²¡å–åˆ°"]; UIAlertController *alert = [UIAlertController alertControllerWithTitle:@"æˆ‘æ˜¯" message:paramsStr preferredStyle: UIAlertControllerStyleAlert]; [alert addAction:[UIAlertAction actionWithTitle:@"ç¡®å®š" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) &#123; &#125;]]; /// å¼¹å‡ºæç¤ºæ¡†(ä¾¿äºŽè°ƒè¯•ï¼Œè°ƒè¯•å®ŒæˆåŽåˆ é™¤æ­¤ä»£ç ) [self.window.rootViewController presentViewController:alert animated:true completion:nil]; &#125; [[UserAnalysisManager manager] sendAppFirstLauchDataToServer];&#125; è‡³æ­¤éœ€æ±‚å®Œæˆ.]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>OpenInstall</tag>
        <tag>Objective-c</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hexo-åŸŸåè§£æž(é˜¿é‡Œäº‘)]]></title>
    <url>%2F2017%2F05%2F25%2Fhexo-domain-alicloud%2F</url>
    <content type="text"><![CDATA[è‡ªä»ŽHexoåšå®¢æ­å»ºå®Œæˆ,æ¯æ¬¡è®¿é—®éƒ½è¦è¾“å…¥urm9ril.github.ioä¸€é•¿ä¸²åŸŸåæ¥è®¿é—®,è¿™å°±å¾ˆå°´å°¬äº†ðŸ˜“. è´­ä¹°ä¸€ä¸ªçŸ­ä¸€ç‚¹çš„åŸŸå,é€šè¿‡è§£æžDNS,è¾¾åˆ°é€šè¿‡åŸŸåè®¿é—®åšå®¢çš„ç›®çš„ è´­ä¹°åŸŸåç½‘ä¸Šæ‰¾äº†ä¸€ä¸‹,æœ€ç»ˆé€‰æ‹©äº†é˜¿é‡Œä¸‡ç½‘çš„.topåŸŸå,å› ä¸ºæˆæœ¬ä½Ž,ä¸€å¹´åªéœ€è¦4RMB,æ€§ä»·æ¯”ç›¸å½“ä¹‹é«˜. åŸŸåè®¤è¯ç™»å½•è¿›å…¥é˜¿é‡Œäº‘æŽ§åˆ¶å°,ç‚¹å‡»åŸŸåå’Œç½‘ç«™ä¸­çš„ â€˜åŸŸåâ€™,åˆšè´­ä¹°çš„åŸŸåéœ€è¦è¿›è¡Œå®žåè®¤è¯. å¡«å†™è®¤è¯èµ„æ–™,ç­‰å¾…å®¡æ ¸,ä¸€èˆ¬ä¸€ä¸ªå·¥ä½œæ—¥å†…å°±èƒ½é€šè¿‡å®¡æ ¸äº†,å¦‚æžœä½ å¡«å†™çš„èµ„æ–™æ²¡æœ‰é—®é¢˜çš„è¯. åŸŸåè§£æž ç‚¹å‡»è§£æž éœ€è¦æ·»åŠ ä¸¤æ¡Aè®°å½•ä¸€å¤©CNAMEè®°å½• 192.30.252.153 , 192.30.252.154 åœ°å€æ¥è‡ª GitHub Pages Hexo é…ç½®åœ¨ hexo ä¸‹çš„ source ä¸‹æ–°å»ºåä¸º CNAME æ— æ–‡ä»¶åŽç¼€çš„æ–‡ä»¶, æ–‡ä»¶å†…å®¹ä¸ºè´­ä¹°çš„åŸŸå urm9ril.top hexo c hexo g hexo d é‡æ–°éƒ¨ç½² blog åˆ° github çŽ°åœ¨å–å£æ°´å§, ç¨ç­‰ä¸€ä¼šå³å¯é€šè¿‡è´­ä¹°çš„urm9til.topæ¥è®¿é—®ä½ çš„ blog äº†]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>åŸŸåè§£æž</tag>
        <tag>é˜¿é‡Œäº‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[XLForm è¡¨å•åº“ä½¿ç”¨è¯´æ˜Ž]]></title>
    <url>%2F2017%2F05%2F02%2FXLForm-usage%2F</url>
    <content type="text"><![CDATA[ç®€è¿°XLForm åº”è¯¥ç®—æ˜¯ iOS å¹³å°ä¸Šæœ€çµæ´»ä¸”æœ€å¼ºå¤§çš„åŠ¨æ€è¡¨å•åº“äº†, ä»¥ä¸‹æ˜¯ç®€å•çš„ç»“æž„å›¾ æœ€ä¸»è¦çš„ä¸Šå›¾çº¢è‰²æ¡†é‡Œçš„ä¸‰ä¸ªç±»æ–‡ä»¶XLFormRowDescriptorï¼ŒXLFormSectionDescriptorï¼ŒXLFormDescriptor 1.XLFormDescriptorç»“æž„å’Œ UITablView ä¸€æ ·ï¼Œæœ‰ Section ,æœ‰ Row,å®ƒå°±æ˜¯ä¸ºæˆä¸º UITableView çš„æ•°æ®æºè€Œè®¾è®¡çš„. 2.XLFormRowDescriptor å®šä¹‰äº†æ¯è¡Œè¡¨å•çš„æ•°æ®å†…å®¹,åŒ…æ‹¬è¡Œæ ·å¼,æ ‡é¢˜,è¡Œç±»åž‹,é€‰æ‹©é¡¹å†…å®¹,æ ‡ç­¾,åˆæ³•æ€§éªŒè¯ç­‰. 3.XLFormSectionDescriptor æ˜¯ç”± XLFormRowDescriptor ç»„åˆè€Œæˆçš„,è€Œ XLFormSectionDescriptor æœ€ç»ˆåˆç»„æˆäº† XLFormDescriptor. ç®€å•ç”¨æ³•1. åˆ›å»ºä¸€ä¸ªç»§æ‰¿è‡ª XLFormViewController çš„ ViewController 2. ç¼–å†™åˆ›å»ºè¡¨å•çš„ä»£ç  1234567891011121314151617- (void)initForm &#123; // åˆ›å»º `XLFormDescriptor` å¯¹è±¡,ç­‰åŒäºŽåˆ›å»ºäº† `UITableView` XLFormDescriptor *form = [XLFormDescriptor formDescriptorWithTitle:@"First Form"]; // åˆ›å»º `XLFormSectionDescriptor` ç»„å¯¹è±¡ XLFormSectionDescriptor *section = [XLFormSectionDescriptor formSectionWithTitle:@"First Section"]; // åˆ›å»º `XLFormRowDescriptor` å¯¹è±¡,ç›¸å½“äºŽ `UITableViewCell` // `XLFormRowDescriptorTypePhone` æ˜¯ `XLForm` æ¡†æž¶è‡ªå¸¦çš„ `XLFormRowDescriptorType` ç±»åž‹ // å…·ä½“å‚è§æ–‡ä»¶ `XLForm.h` å¤´æ–‡ä»¶ XLFormRowDescriptor *row = [XLFormRowDescriptor formRowDescriptorWithTag:@"PhoneRow" rowType:XLFormRowDescriptorTypePhone]; // ç»„å†…æ·»åŠ  `XLFormRowDescriptor` å¯¹è±¡ [section addFormRow:row]; // è¡¨å•æ·»åŠ  `XLFormSectionDescriptor` ç»„å¯¹è±¡ [form addFormSection:section]; // èµ‹å€¼åˆ›å»ºçš„è¡¨å•, `self.form` æ˜¯å½“å‰æŽ§åˆ¶å™¨æŒæœ‰çš„ `XLFormDescriptor` å¯¹è±¡ self.form = form;&#125; è°ƒç”¨ 12345- (void)viewDidLoad &#123; [super viewDidLoad]; [self initForm];&#125; Command + R æ•ˆæžœå¦‚ä¸‹ å…·ä½“çš„ XLFormRowDescriptorType1234567891011121314151617181920212223242526272829303132333435363738394041NSString *const XLFormRowDescriptorTypeText = @"text";NSString *const XLFormRowDescriptorTypeName = @"name";NSString *const XLFormRowDescriptorTypeURL = @"url";NSString *const XLFormRowDescriptorTypeEmail = @"email";NSString *const XLFormRowDescriptorTypePassword = @"password";NSString *const XLFormRowDescriptorTypeNumber = @"number";NSString *const XLFormRowDescriptorTypePhone = @"phone";NSString *const XLFormRowDescriptorTypeTwitter = @"twitter";NSString *const XLFormRowDescriptorTypeAccount = @"account";NSString *const XLFormRowDescriptorTypeInteger = @"integer";NSString *const XLFormRowDescriptorTypeImage = @"image";NSString *const XLFormRowDescriptorTypeDecimal = @"decimal";NSString *const XLFormRowDescriptorTypeTextView = @"textView";NSString *const XLFormRowDescriptorTypeZipCode = @"zipCode";NSString *const XLFormRowDescriptorTypeSelectorPush = @"selectorPush";NSString *const XLFormRowDescriptorTypeSelectorPopover = @"selectorPopover";NSString *const XLFormRowDescriptorTypeSelectorActionSheet = @"selectorActionSheet";NSString *const XLFormRowDescriptorTypeSelectorAlertView = @"selectorAlertView";NSString *const XLFormRowDescriptorTypeSelectorPickerView = @"selectorPickerView";NSString *const XLFormRowDescriptorTypeSelectorPickerViewInline = @"selectorPickerViewInline";NSString *const XLFormRowDescriptorTypeMultipleSelector = @"multipleSelector";NSString *const XLFormRowDescriptorTypeMultipleSelectorPopover = @"multipleSelectorPopover";NSString *const XLFormRowDescriptorTypeSelectorLeftRight = @"selectorLeftRight";NSString *const XLFormRowDescriptorTypeSelectorSegmentedControl = @"selectorSegmentedControl";NSString *const XLFormRowDescriptorTypeDateInline = @"dateInline";NSString *const XLFormRowDescriptorTypeDateTimeInline = @"datetimeInline";NSString *const XLFormRowDescriptorTypeTimeInline = @"timeInline";NSString *const XLFormRowDescriptorTypeCountDownTimerInline = @"countDownTimerInline";NSString *const XLFormRowDescriptorTypeDate = @"date";NSString *const XLFormRowDescriptorTypeDateTime = @"datetime";NSString *const XLFormRowDescriptorTypeTime = @"time";NSString *const XLFormRowDescriptorTypeCountDownTimer = @"countDownTimer";NSString *const XLFormRowDescriptorTypeDatePicker = @"datePicker";NSString *const XLFormRowDescriptorTypePicker = @"picker";NSString *const XLFormRowDescriptorTypeSlider = @"slider";NSString *const XLFormRowDescriptorTypeBooleanCheck = @"booleanCheck";NSString *const XLFormRowDescriptorTypeBooleanSwitch = @"booleanSwitch";NSString *const XLFormRowDescriptorTypeButton = @"button";NSString *const XLFormRowDescriptorTypeInfo = @"info";NSString *const XLFormRowDescriptorTypeStepCounter = @"stepCounter"; ä½äºŽæ¡†æž¶å†… XLForm.h å¤´æ–‡ä»¶ä¸­,è¯·è‡ªè¡Œå‚çœ‹ è‡ªå®šä¹‰ cellå½“æ¡†æž¶è‡ªå¸¦çš„ XLFormRowDescriptorType æ— æ³•æ»¡è¶³å®žé™…éœ€æ±‚çš„æ—¶å€™,æˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰. å¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ª XLFormRowDescriptorTypeæˆ‘ä»¬å¿…é¡»é‡å†™å¦‚ä¸‹ä¸‰ä¸ªæ–¹æ³•:1.load æ³¨å†Œè‡ªå®šä¹‰çš„ cell. 2.configure åˆå§‹åŒ–ä¸€äº› cell é…ç½®ä¿¡æ¯. 3.update æ›´æ–° XLFromRowDescriptor å¯¹è±¡çš„ value å±žæ€§å€¼. å¦‚ä½•è‡ªå®šä¹‰ cellä¸‹é¢æ¼”ç¤ºå¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ªä¸Šè¾¹ UILabel ä¸‹è¾¹ UITextField çš„è‡ªå®šä¹‰ cell, ç”¨åˆ°äº† Masonry è€å¸æœºè‡ªè¡Œå¯¼å…¥. 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475#import "SampleCustomCell.h"#import &lt;XLForm/XLForm.h&gt;#import &lt;Masonry.h&gt;NSString *const SampleCustomCellType = @"SampleCustomCellType";@interface SampleCustomCell()&lt;UITextFieldDelegate&gt;/** Label for display tip */@property (nonatomic, strong) UILabel *tipLabel;/** textField for Receive input text */@property (nonatomic, strong) UITextField *inputTextField;@end@implementation SampleCustomCell+ (void)load &#123; [XLFormViewController.cellClassesForRowDescriptorTypes setObject:[self class] forKey:SampleCustomCellType];&#125;- (void)configure &#123; [super configure]; [self setupUI]; [self makeConstraint];&#125;- (void)update &#123; [super update]; self.textLabel.text = self.rowDescriptor.title;&#125;#pragma mark - =========================================== layout ===================================- (void)setupUI &#123; [self.contentView addSubview:self.tipLabel]; [self.contentView addSubview:self.inputTextField];&#125;- (void)makeConstraint &#123; [self.textLabel mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.top.equalTo(self.contentView).offset(10); make.left.equalTo(self.contentView).offset(20); &#125;]; [self.inputTextField mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.left.equalTo(self.textLabel); make.top.equalTo(self.textLabel.mas_bottom).offset(10); make.right.equalTo(self.contentView).offset(-20); make.height.mas_equalTo(44); make.bottom.equalTo(self.contentView).offset(-10); &#125;];&#125;#pragma mark - =========================================== lazy load ===================================- (UILabel *)tipLabel &#123; if(_tipLabel) return _tipLabel; _tipLabel = [UILabel new]; _tipLabel.textColor = HEXCOLOR(0xFF8A00); return _tipLabel;&#125;- (UITextField *)inputTextField &#123; if(_inputTextField) return _inputTextField; _inputTextField = [UITextField new]; _inputTextField.delegate = self; _inputTextField.layer.borderColor = HEXCOLOR(0xFF8A00).CGColor; _inputTextField.layer.borderWidth = 1; return _inputTextField;&#125;- (void)setSelected:(BOOL)selected animated:(BOOL)animated &#123; [super setSelected:selected animated:animated];&#125;@end ä½†æ˜¯é”®ç›˜æœ‰é—®é¢˜,é€‰ä¸­çš„èƒŒæ™¯è‰²æœ‰é—®é¢˜,éœ€è¦æ”¹é€ ä¸€ä¸‹.1234567891011121314151617- (void)configure &#123; [super configure]; [self setupUI]; [self makeConstraint]; [self setSelectionStyle:UITableViewCellSelectionStyleNone];&#125;.......- (BOOL)formDescriptorCellCanBecomeFirstResponder &#123; return (!self.rowDescriptor.isDisabled);&#125;- (BOOL)formDescriptorCellBecomeFirstResponder &#123; return [self.inputTextField becomeFirstResponder];&#125; å¥½äº†,ç®€å•çš„è‡ªå®šä¹‰å®Œæˆäº†. è¡¨å•æ•°æ®çš„èŽ·å–åœ¨ viewController ä¸­1[self.form formValues]; èŽ·å–è¡¨å•çš„å€¼,å…¶è¿”å›žå€¼æ˜¯å­—å…¸ç±»åž‹1234formValues = &#123; PhoneRow = 5158; SampleRow = "&lt;null&gt;";&#125; ä½ æ²¡æœ‰çœ‹é”™,åˆšæ‰æˆ‘ä»¬è‡ªå®šä¹‰çš„ cell çš„è¡¨å•å€¼æ˜¯ &quot;&lt;null&gt;&quot; ,ä¸æ˜¯å› ä¸ºæ²¡æœ‰è¾“å…¥å€¼,è€Œæ˜¯æ²¡æœ‰ç»™ rowDescriptor.value èµ‹å€¼,ç»§ç»­æ”¹é€ ä¸€ä¸‹. 1234567// æ·»åŠ äº‹ä»¶[_inputTextField addTarget:self action:@selector(textFieldDidChange:) forControlEvents:UIControlEventEditingChanged];// èµ‹å€¼- (void)textFieldDidChange:(UITextField *)textField &#123; self.rowDescriptor.value = textField.text;&#125; 1234formValues = &#123; PhoneRow = "5158"; SampleRow = Ooops;&#125; æ•°æ®åˆæ³•æ€§æ ¡éªŒå™¨ XLFormValidatorä¸Šé¢çš„ä¾‹å­,å†ç»™åŠ ç‚¹æ–™.ç²—ç³™ä¸€ç‚¹çš„æ•°æ®åˆæ³•æ€§éªŒè¯1234567891011121314#pragma mark - Helper- (void)textFieldDidChange:(UITextField *)textField &#123; UITextRange *rang = textField.markedTextRange; if (rang == nil) &#123; if(textField.text.length &gt; 8 )&#123; NSRange range = NSMakeRange(0, 8); textField.text = [textField.text substringWithRange:range]; self.rowDescriptor.value = textField.text; NSLog(@"æœ€å¤šè¾“å…¥8ä¸ªå­—ç¬¦"); &#125;else&#123; self.rowDescriptor.value = textField.text; &#125; &#125;&#125; è¿™ä¹ˆåšå…¶å®žä¹Ÿæ˜¯å¯ä»¥çš„,ä½†æ˜¯æ¡†æž¶æä¾›äº† XLFormValidator æ•°æ®æ ¡éªŒç±». æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ XLFormValidator çš„åˆ›å»ºåˆ›å»ºä¸€ä¸ªç»§æ‰¿è‡ª XLFormValidator çš„ SampleValidator ç±»æ–‡ä»¶,ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„æ–¹å¼éªŒè¯æ•°æ®åˆæ³•æ€§..h1234567#import "XLFormValidator.h"@interface SampleValidator : XLFormValidator+ (XLFormValidator *)sampleValidator;@end .m1234567891011121314#import "SampleValidator.h"#import "XLFormRegexValidator.h"@implementation SampleValidator- (XLFormValidationStatus *)isValid:(XLFormRowDescriptor *)row &#123; return [XLFormValidationStatus formValidationStatusWithMsg:nil status:YES rowDescriptor:row];&#125;+ (XLFormValidator *)sampleValidator &#123; return [XLFormRegexValidator formRegexValidatorWithMsg:NSLocalizedString(@"æœ€å¤šè¾“å…¥8ä¸ªå­—ç¬¦", nil) regex:@"^.&#123;0,8&#125;$"];&#125;@end XLFormValidator çš„ä½¿ç”¨åœ¨ viewController ä¸­ ä¸ºå…ˆå‰åˆ›å»ºçš„è‡ªå®šä¹‰ cell æ·»åŠ åˆšåˆ›å»ºçš„ æ•°æ®åˆæ³•æ€§ æ ¡éªŒå™¨,ä¸”è®¾ä¸º å¿…å¡«é¡¹ .1234#import "SampleValidator.h"......[sampleRow addValidator:[SampleValidator sampleValidator]];sampleRow.required = YES; ç»§ç»­æ”¹é€ ä¸€ä¸‹ä»£ç . 123456789101112131415161718192021222324252627282930313233343536373839404142- (void)values:(UIButton *)sender &#123; if(![self validatorAction]) &#123; return; &#125; NSDictionary *values = [self.form formValues]; NSLog(@"formValues = %@",values); // æŽ¥å£è°ƒç”¨...balabalabala&#125;#pragma mark - =========================================== æ•°æ®åˆæ³•æ€§æ ¡éªŒ ===================================- (BOOL)validatorAction &#123; NSArray * array = [self.form localValidationErrors:self]; BOOL isValidator; if(array.count &gt; 0) &#123; [array enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) &#123; XLFormValidationStatus * validationStatus = [[obj userInfo] objectForKey:XLValidationStatusErrorKey]; if ([validationStatus.rowDescriptor.tag isEqualToString:sampleRowTag] &amp;&amp; !validationStatus.isValid) &#123; *stop = YES; NSLog(@"è¯·ä¿®æ­£æ•°æ®"); &#125; UITableViewCell * cell = [self.tableView cellForRowAtIndexPath:[self.form indexPathOfFormRow:validationStatus.rowDescriptor]]; [self animateCell:cell]; &#125;]; isValidator = NO; &#125; else &#123; isValidator = YES; &#125; return isValidator;&#125;// éªŒè¯æ•°æ®é”™è¯¯çš„cellåŠ¨ç”»- (void)animateCell:(UITableViewCell *)cell &#123; CAKeyframeAnimation *animation = [CAKeyframeAnimation animation]; animation.keyPath = @"position.x"; animation.values = @[ @0, @20, @-20, @10, @0]; animation.keyTimes = @[@0, @(1 / 6.0), @(3 / 6.0), @(5 / 6.0), @1]; animation.duration = 0.3; animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut]; animation.additive = YES; [cell.layer addAnimation:animation forKey:@"shake"];&#125; åªæ˜¯ä¸€ä¸ªè‡ªå®šä¹‰ cell æŽ§åˆ¶å™¨çš„ä»£ç å·²ç»æœ‰ç‚¹å¤šäº†.ä¸‹é¢æˆ‘ä»¬æŠ½ç¦»ä¸€ä¸‹ 1. æŠ½ç¦» cell tag çš„å¸¸é‡å®šä¹‰åˆ° CustomConst æ–‡ä»¶ä¸­ ..h1234#import &lt;Foundation/Foundation.h&gt;extern NSString *const phoneRowTag;extern NSString *const sampleRowTag; .m1234#import "CustomConst.h"NSString *const phoneRowTag = @"phoneRowTag";NSString *const sampleRowTag = @"sampleRowTag"; 2. æŠ½ç¦» initForm è¡¨å•åˆ›å»ºæ–¹æ³•åˆ° CustomFactory æ–‡ä»¶.h1234567891011121314151617#import &lt;Foundation/Foundation.h&gt;#import &lt;XLFormViewController.h&gt;@interface CustomFactory : NSObject/** delegate */@property (nonatomic, weak) XLFormViewController *delegate;/** xlForm */@property (nonatomic, weak) XLFormDescriptor *form;/** åˆå§‹åŒ–è¡¨å•æ–¹æ³• */- (void)initForm;@end .m123456789101112131415161718192021222324252627282930313233343536373839404142434445#import "CustomFactory.h"#import "CustomConst.h"#import "SampleValidator.h"#import "SampleCustomCell.h"#import &lt;XLForm.h&gt;@implementation CustomFactory- (void)initForm &#123; XLFormSectionDescriptor * sampleSection = [XLFormSectionDescriptor formSectionWithTitle:@"First Section"]; [sampleSection addFormRow:[self rowFactoryWithWithTitle:@"" tag:phoneRowTag required:YES rowType:XLFormRowDescriptorTypePhone placeholder:@""]]; [sampleSection addFormRow:[self rowFactoryWithWithTitle:@"è‡ªå®šä¹‰çš„tip" tag:sampleRowTag required:YES rowType:SampleCustomCellType placeholder:@"æœ€é•¿å…«ä½å­—ç¬¦"]]; [self.form addFormSection:sampleSection];&#125;- (XLFormRowDescriptor *)rowFactoryWithWithTitle:(NSString *)headerTitle tag:(NSString *)tag required:(BOOL)required rowType:(NSString *)rowType placeholder:(NSString *)placeholder &#123; XLFormRowDescriptor *row; row = [XLFormRowDescriptor formRowDescriptorWithTag:tag rowType:rowType]; if(tag == sampleRowTag) &#123; [row addValidator:[SampleValidator sampleValidator]]; [row.cellConfigAtConfigure setObject:placeholder forKey:@"inputTextField.placeholder"]; &#125; if(required) &#123; row.requireMsg = @"å¸¦*ä¸ºå¿…å¡«!"; &#125; row.required = required; row.title = headerTitle; row.height = UITableViewAutomaticDimension; return row;&#125;@end 3. æŠ½ç¦» validatorAction æ•°æ®åˆæ³•æ ¡éªŒæ–¹æ³• åˆ° CustomValidator æ–‡ä»¶ä¸­ .h12345678910111213141516171819#import &lt;Foundation/Foundation.h&gt;#import &lt;UIKit/UIKit.h&gt;#import &lt;XLForm.h&gt;@interface CustomValidator : NSObject/** éªŒè¯è¡¨æ ¼ */@property (nonatomic, weak) UITableView *tableView;/** xlForm */@property (nonatomic, weak) XLFormDescriptor *form;/** delegate */@property (nonatomic, weak) XLFormViewController *delegate;/** æ‰€æœ‰æ•°æ®æ˜¯å¦æ ¡éªŒå®Œæ¯• */@property (nonatomic,assign) BOOL isValidate;/** éªŒè¯è¡¨å•æ•°æ®çš„æ–¹æ³• */- (void)validatorAction;@end .m123456789101112131415161718192021222324252627282930313233343536373839#import "CustomValidator.h"#import "CustomConst.h"@implementation CustomValidator#pragma mark - cellæ•°æ®åˆæ³•åŒ–éªŒè¯æ–¹æ³•- (NSArray *)formValidationErrors &#123; return [self.form localValidationErrors:self.delegate];&#125;#pragma mark - æ•°æ®æ ¡éªŒå™¨- (void)validatorAction &#123; NSArray * array = [self formValidationErrors]; self.isValidate = !(array.count &gt; 0); [array enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) &#123; XLFormValidationStatus * validationStatus = [[obj userInfo] objectForKey:XLValidationStatusErrorKey]; if ([validationStatus.rowDescriptor.tag isEqualToString:sampleRowTag] &amp;&amp; !validationStatus.isValid) &#123; *stop = YES; NSLog(@"è¯·ä¿®æ­£æ•°æ®"); &#125; UITableViewCell * cell = [self.tableView cellForRowAtIndexPath:[self.form indexPathOfFormRow:validationStatus.rowDescriptor]]; [self animateCell:cell]; &#125;];&#125;// éªŒè¯æ•°æ®é”™è¯¯çš„cellåŠ¨ç”»- (void)animateCell:(UITableViewCell *)cell &#123; CAKeyframeAnimation *animation = [CAKeyframeAnimation animation]; animation.keyPath = @"position.x"; animation.values = @[ @0, @20, @-20, @10, @0]; animation.keyTimes = @[@0, @(1 / 6.0), @(3 / 6.0), @(5 / 6.0), @1]; animation.duration = 0.3; animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut]; animation.additive = YES; [cell.layer addAnimation:animation forKey:@"shake"];&#125;@end viewController ä¸­çš„ä»£ç å˜æˆäº†è¿™æ ·12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697#import "ViewController.h"#import &lt;XLForm/XLFormViewController.h&gt;#import &lt;XLForm.h&gt;#import &lt;Masonry.h&gt;#import "CustomFactory.h"#import "CustomValidator.h"@interface ViewController ()/** button for get form values */@property (nonatomic, strong) UIButton *valuesButton;/** custom factory */@property (nonatomic, strong) CustomFactory *customFactory;/** Custom Validator */@property (nonatomic, strong) CustomValidator *customValidator;@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; [self initForm]; [self setupUI]; [self makeConstraint]; &#125;- (void)setupUI &#123; [self.view addSubview:self.valuesButton];&#125;- (void)makeConstraint &#123; [self.tableView mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.left.top.right.equalTo(self.view); make.bottom.mas_equalTo(-100); &#125;]; [self.valuesButton mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.left.right.bottom.equalTo(self.view); make.height.mas_equalTo(50); &#125;];&#125;- (void)initForm &#123; self.form = [XLFormDescriptor formDescriptorWithTitle:@"First Form"]; self.customFactory.form = self.form; self.customFactory.delegate = self; self.customValidator.form = self.form; self.customValidator.delegate = self; self.customValidator.tableView = self.tableView; [self.customFactory initForm];&#125;#pragma mark - =========================================== lazy load ===================================- (UIButton *)valuesButton &#123; if(_valuesButton) return _valuesButton; _valuesButton = [UIButton buttonWithType:0]; [_valuesButton setTitle:@"Values" forState:UIControlStateNormal]; [_valuesButton setBackgroundColor:HEXCOLOR(0xFF8A00)]; [_valuesButton setTitleColor:HEXCOLOR(0xFFFFFF) forState:UIControlStateNormal]; [_valuesButton addTarget:self action:@selector(values:) forControlEvents:UIControlEventTouchUpInside]; return _valuesButton;&#125;- (CustomFactory *)customFactory &#123; if(_customFactory) return _customFactory; _customFactory = [CustomFactory new]; return _customFactory;&#125;- (CustomValidator *)customValidator &#123; if(_customValidator) return _customValidator; _customValidator = [CustomValidator new]; return _customValidator;&#125;- (void)values:(UIButton *)sender &#123; [self.customValidator validatorAction]; if(!self.customValidator.isValidate) return; NSDictionary *values = [self.form formValues]; NSLog(@"formValues = %@",values);&#125;- (void)didReceiveMemoryWarning &#123; [super didReceiveMemoryWarning]; // Dispose of any resources that can be recreated.&#125;@end æ‰€æœ‰è·Ÿè¡¨å•æœ‰å…³çš„ä¸œè¥¿éƒ½æŠ½ç¦»å‡ºåŽ». æœ‰ç§ ä¸‡èŠ±ä¸›ä¸­è¿‡,ä¾¿å®œä¸æ²¾èº« çš„æ„Ÿè§‰,æœ‰æ²¡æœ‰. ç»“è¯­åŽé¢æœ‰æœºä¼šä»‹ç»æ›´åŠ å¤æ‚çš„è‡ªå®šä¹‰ cellâ€¦ è¡¥ä¸Šé•¿ä¹…ä»¥æ¥ç¼ºå¤±çš„ Demo]]></content>
      <categories>
        <category>XLForm</category>
      </categories>
      <tags>
        <tag>XLForm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Jenkinsä¸€é”®å‘å¸ƒ ipa åˆ°è’²å…¬è‹±]]></title>
    <url>%2F2017%2F03%2F12%2FJenkins%2F</url>
    <content type="text"><![CDATA[å›¾å·²è¡¥ ðŸ˜“2017.05.20 ç”±äºŽä¸å°å¿ƒåˆ é™¤äº†é…å›¾ä»“åº“,å›¾ç‰‡éƒ½çœ‹ä¸è§äº†,æœ‰æ—¶é—´å†ç»™è¡¥ä¸Š, å„ä½è§‚ä¼—è€çˆ·,è½»å–·ä»€ä¹ˆæ˜¯ JenkinsJenkinsæ˜¯ä¸€ä¸ªæŒç»­é›†æˆå·¥å…·ï¼Œå®ƒå¯ä»¥åœ¨è®¾å®šçš„æŸä¸ªæ—¶é—´ç‚¹ï¼ˆæˆ–è€…ä»£ç æœ‰æ›´æ–°ç­‰æƒ…å†µï¼‰è‡ªåŠ¨åŽ»æž„å»ºå®‰è£…åŒ…ï¼ŒåŒæ—¶å¯ä»¥å°†å®‰è£…åŒ…ä¸Šä¼ åˆ°ç¬¬ä¸‰æ–¹å¹³å°ï¼Œæ¯”å¦‚ï¼šBuglyã€è’²å…¬è‹±ï¼Œè¿™æ ·æµ‹è¯•äººå‘˜å¯ä»¥é€šè¿‡å¾®ä¿¡ã€QQæ‰«ä¸€æ‰«ç›´æŽ¥å®‰è£… é™„ä¸Šä¸‹è½½åœ°å€ :Jenkins å»ºè®®ä¸‹è½½ .waræ–‡ä»¶ é…åˆTomcatçŽ¯å¢ƒä½¿ç”¨. ç›´æŽ¥ä¸‹è½½äº†.waræ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯ç›´æŽ¥æ”¾åœ¨Tomcatä¸‹webappsç›®å½•ä¸‹. ä¼˜ç‚¹:å®ƒçš„æƒé™å°±æ˜¯å½“å‰ç”¨æˆ·. å¼€å§‹å®‰è£…Tomcat é™„ä¸Šä¸‹è½½åœ°å€ :Tomcat æŠŠä¸‹è½½å¥½çš„ Tomcat æ–‡ä»¶å¤¹ æ”¾åˆ°ä½ æƒ³æ”¾çš„ç›®å½• ç„¶åŽæŠŠ .war æ–‡ä»¶æ”¾å…¥ Tomcatæ–‡ä»¶å¤¹ä¸‹çš„ webapps ç›®å½•ä¸‹ è¿è¡ŒJenkinså‘½ä»¤è¡Œè¿›å…¥Tomcatå®‰è£…ç›®å½•. cd /Users/ooops/apache-tomcat-7.0.75/bin å¯èƒ½ä¼šæŠ¥ -bash: /Users/ooops/apache-tomcat-7.0.75/bin/startup.sh: Permission deniedé”™è¯¯,è¿™æ˜¯å› ä¸ºå¯¹è¯¥æ–‡ä»¶æ²¡æœ‰æ‰§è¡Œæƒé™é€ æˆçš„. æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤: chmod +x *.sh ç„¶åŽæ‰§è¡Œ sh startup.sh æ‰“å¼€æµè§ˆå™¨è¾“å…¥ localhost:8080 çœ‹åˆ° Tomcatå¯åŠ¨é¡µé¢,è¡¨ç¤ºTomcatå®‰è£…æˆåŠŸ è¿›å…¥Tomcatç›®å½•ä¸‹ confæ‰“å¼€ tomcat-users.xmlæ–‡ä»¶,åœ¨æ–‡ä»¶æ ¹èŠ‚ç‚¹ç»“æŸä¹‹å‰æ·»åŠ å¦‚ä¸‹é…ç½® 12&lt;role rolename="manager-gui"/&gt;&lt;user username="admin" password="admin" roles="manager-gui"/&gt; è®¾ç½®Tomcatçš„ç™»å½•ä¿¡æ¯ ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤é‡å¯Tomcat cd /Users/ooops/apache-tomcat-7.0.75/bin sh shutdown.sh sh startup.sh å†æ¬¡è®¿é—® localhost:8080 é€‰æ‹© Manager Apps ç™»å½•Tomcat,é€‰æ‹©åˆ—è¡¨ä¸­Jenkins è¾“å…¥å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹Jenkinsåˆå§‹å¯†ç  open /Users/ooops/.jenkins/secrets/initialAdminPassword ç²˜è´´åˆå§‹å¯†ç ,ç‚¹å‡»ç»§ç»­,ç­‰å¾…ç‰‡åˆ» é€‰æ‹©Install suggested plugins å®‰è£…æŽ¨èçš„ Jenkins æ’ä»¶ æŽ¨èçš„æ’ä»¶å®‰è£…å®Œæ¯•,è¿˜æœ‰æˆ‘ä»¬è‡ªå·±éœ€è¦çš„æ’ä»¶å®‰è£… é¦–å…ˆè¿›å…¥æ’ä»¶ç®¡ç†å™¨ç•Œé¢,è¿›å…¥æ–¹å¼: ç³»ç»Ÿç®¡ç†-&gt;ç®¡ç†æ’ä»¶ åœ¨å¯é€‰æ’ä»¶ä¸­æœç´¢æˆ‘ä»¬éœ€è¦çš„æ’ä»¶,è¿›è¡Œå®‰è£… GIT çŽ¯å¢ƒä¸‹æˆ‘ä»¬éœ€è¦å®‰è£…çš„æ’ä»¶æœ‰ ä¸‰ ä¸ª Gitlab Hook Plugin å› ä¸ºæˆ‘ä»¬ç”¨çš„æ˜¯GitLabæ¥ç®¡ç†æºä»£ç ï¼ŒJenkinsæœ¬èº«å¹¶æ²¡æœ‰è‡ªå¸¦GitLabæ’ä»¶ Xcode XcodeçŽ¯å¢ƒæ’ä»¶. Keychains and Provisioning Profiles Management é’¥åŒ™ä¸²å’Œè¯ä¹¦é…ç½® é…ç½®GITç§é’¥æ–‡ä»¶ä½ç½® å®¶ç›®å½•ä¸‹çš„ .ssh æ–‡ä»¶å¤¹ä¸‹ é…ç½®GIT ç§é’¥ é’¥åŒ™ä¸²å’Œè¯ä¹¦é…ç½®è¿›å…¥æ–¹å¼: ç³»ç»Ÿç®¡ç†-&gt;Keychains and Provisioning Profiles Management é’¥åŒ™ä¸²æ–‡ä»¶è·¯å¾„ : /Users/ç”¨æˆ·å(your user name)/Library/Keychains/login.keychain ä¸Šä¼ é’¥åŒ™ä¸² keychain å’Œ è¯ä¹¦æè¿°æ–‡ä»¶ Provisioning Profile ä¸Šä¼ ä¹‹åŽçš„è¦æ˜¯ä¸²å’Œè¯ä¹¦æè¿°æ–‡ä»¶ä¼šè¢«Jenkins ä¿å­˜åœ¨/Users/æ”¹æˆä½ çš„(your user name)/.jenkins/kpp_uploadç›®å½•ä¸‹ é…ç½®å¯¹åº”çš„é’¥åŒ™ä¸²ä¸­çš„å¼€å‘(è°ƒè¯•) ç”Ÿäº§(å‘å¸ƒ) è¯ä¹¦ é¦–å…ˆæ‰“å¼€é’¥åŒ™ä¸²,èŽ·å–è¯ä¹¦çš„å¸¸ç”¨åç§° æˆ‘ä»¬å°†è¯ä¹¦çš„å¸¸ç”¨åç§°ç‚¹å…¥ é’¥åŒ™ä¸²çš„é…ç½®ä¸­,å…·ä½“é…ç½®å‚è€ƒä¸‹å›¾ ä¸Šå›¾ç›®å½•é…ç½®,æ”¹ä¸º/Users/æ”¹æˆä½ çš„(your user name)/.jenkins/kpp_upload.å·ä¸ªæ‡’ ä¸è¡¥å›¾äº†. ç‚¹å‡»ç¡®å®šå®Œæˆé…ç½®. ç³»ç»Ÿå…¨å±€é…ç½®Jenkins ä¸»é¡µ -&gt; ç³»ç»Ÿç®¡ç† -&gt; ç³»ç»Ÿè®¾ç½® -&gt; å…¨å±€å±žæ€§ -&gt; å‹¾é€‰Keychains and Provisioning Profiles Management å¡«å…¥ä¸Šä¼ åˆ° Jenkins çš„è¯ä¹¦å’Œæè¿°æ–‡ä»¶ç›®å½• /Users/ooops(ä½ çš„ç”¨æˆ·å)/.jenkins/kpp_upload ä¸‹é¢å¼€å§‹æž„å»ºé¡¹ç›®é…ç½®.åˆ›å»ºä¸€ä¸ªå¤šé…ç½®çš„é¡¹ç›® General å‚æ•° æºç ç®¡ç† å‚æ•° æž„å»ºè§¦å‘å™¨è®¾ç½®è¿™é‡Œæ˜¯è®¾ç½®è‡ªåŠ¨åŒ–æµ‹è¯•çš„åœ°æ–¹ã€‚æ¶‰åŠçš„å†…å®¹å¾ˆå¤šï¼Œæš‚æ—¶æˆ‘ä¹Ÿæ²¡æœ‰æ·±å…¥ç ”ç©¶ï¼Œè¿™é‡Œæš‚æ—¶å…ˆä¸è®¾ç½®ã€‚æœ‰è‡ªåŠ¨åŒ–æµ‹è¯•éœ€æ±‚çš„å¯ä»¥ ç ”ç©¶ç ”ç©¶è¿™é‡Œçš„è®¾ç½®ã€‚ ä¸è¿‡è¿™é‡Œä¸¤ä¸ªé…ç½®è¿˜æ˜¯éœ€è¦æ˜¯è®¾ç½®çš„ Poll SCM (poll source code management) è½®è¯¢æºç ç®¡ç† éœ€è¦è®¾ç½®æºç çš„è·¯å¾„æ‰èƒ½èµ·åˆ°è½®è¯¢çš„æ•ˆæžœã€‚ ä¸€èˆ¬è®¾ç½®ä¸ºç±»ä¼¼ç»“æžœï¼š 0/5 æ¯5åˆ†é’Ÿè½®è¯¢ä¸€æ¬¡ Build periodically (å®šæ—¶æž„å»º) ä¸€èˆ¬è®¾ç½®ä¸ºç±»ä¼¼ï¼š 00 20 * æ¯å¤© 20ç‚¹æ‰§è¡Œå®šæ—¶æž„å»º æ ¼å¼å¦‚ä¸‹ (å…·ä½“å¯ä»¥å‚è€ƒåŽé¢çš„å°é—®å·??) å˜¿å˜¿ åˆ†é’Ÿ(0-59) å°æ—¶(0-23) æ—¥æœŸ(1-31) æœˆ(1-12) å‘¨å‡ (0-7,0å’Œ7éƒ½æ˜¯å‘¨æ—¥) è®¾ç½®ä¹‹åŽæ–‡æœ¬è¾“å…¥åŸŸä¸‹é¢ä¼šæœ‰ä½ å¡«å†™æ ¼å¼çš„ç¿»è¯‘. å‚æ•°é…ç½®å‚è€ƒï¼š https://blog.csdn.net/xueyingqi/article/details/53216506 https://blog.csdn.net/yezicjj/article/details/52763700 æž„å»ºçŽ¯å¢ƒ å‚æ•°å‚è€ƒä¸‹å›¾è®¾ç½® è¯·å‚è€ƒ é’¥åŒ™ä¸²å’Œè¯ä¹¦é…ç½® ä¸­å…³äºŽé’¥åŒ™ä¸²çš„é…ç½®. æž„å»º è®¾ç½® # å·¥ç¨‹å APP_NAME="ä½ çš„é¡¹ç›®åç§°" # è¯ä¹¦ CODE_SIGN_DISTRIBUTION="iPhone Developer: XXXXXXX" #CODE_SIGN_DISTRIBUTION="iPhone Distribution: XXXXXXXXXX" # info.plistè·¯å¾„ project_infoplist_path="./${APP_NAME}/Info.plist" #å–ç‰ˆæœ¬å· bundleShortVersion=$(/usr/libexec/PlistBuddy -c "print CFBundleShortVersionString" "${project_infoplist_path}") #å–buildå€¼ bundleVersion=$(/usr/libexec/PlistBuddy -c "print CFBundleVersion" "${project_infoplist_path}") DATE="$(date +%Y%m%d)" IPANAME="${APP_NAME}_V${bundleShortVersion}_${DATE}.ipa" #IPANAME="${APP_NAME}.ipa" #è¦ä¸Šä¼ çš„ipaæ–‡ä»¶è·¯å¾„ IPA_PATH="$HOME/${IPANAME}" echo ${IPA_PATH} echo "${IPA_PATH}">> text.txt #ä¸‹é¢2è¡Œæ˜¯æ²¡æœ‰Cocopodsçš„ç”¨æ³• echo "=================clean=================" xcodebuild -target "${APP_NAME}" -configuration 'Release' clean echo "+++++++++++++++++build+++++++++++++++++" xcodebuild -target "${APP_NAME}" -sdk iphoneos -configuration 'Release' CODE_SIGN_IDENTITY="${CODE_SIGN_DISTRIBUTION}" SYMROOT='$(PWD)' #//ä¸‹é¢2è¡Œæ˜¯é›†æˆæœ‰Cocopodsçš„ç”¨æ³• #echo "=================clean=================" #xcodebuild -workspace "${APP_NAME}.xcworkspace" -scheme "${APP_NAME}" -configuration 'Release' clean #echo "+++++++++++++++++build+++++++++++++++++" #xcodebuild -workspace "${APP_NAME}.xcworkspace" -scheme "${APP_NAME}" -sdk iphoneos -configuration 'Release' CODE_SIGN_IDENTITY="${CODE_SIGN_DISTRIBUTION}" SYMROOT='$(PWD)' xcrun -sdk iphoneos PackageApplication "./Release-iphoneos/${APP_NAME}.app" -o ~/"${IPANAME}" #è’²å…¬è‹±ä¸Šçš„User Key uKey="9b0aa78a32a......4e1ca68bdbf" #è’²å…¬è‹±ä¸Šçš„API Key apiKey="ac75fcf38.....7b9f19f2e4b23" #è¦ä¸Šä¼ çš„ipaæ–‡ä»¶è·¯å¾„ IPA_PATH=$(cat text.txt) rm -rf text.txt #æ‰§è¡Œä¸Šä¼ è‡³è’²å…¬è‹±çš„å‘½ä»¤ echo "++++++++++++++upload+++++++++++++" curl -F "file=@${IPA_PATH}" -F "uKey=${uKey}" -F "_api_key=${apiKey}" https://www.pgyer.com/apiv1/app/upload æž„å»ºé¡¹ç›®ä»¥ä¸‹æ˜¯ä¸€æ¬¡æˆåŠŸæž„å»ºçš„è¾“å‡ºä¿¡æ¯ Started by user ooops Building in workspace /Users/ooops/.jenkins/workspace/test > git rev-parse --is-inside-work-tree # timeout=10 Fetching changes from the remote Git repository //æ‹‰å–GITä»“åº“ > git config remote.origin.url git@github.com:xxxxx/jenkinsTest.git # timeout=10 Fetching upstream changes from git@github.com:xxxxx/jenkinsTest.git > git --version # timeout=10 > git fetch --tags --progress git@github.com:xxxxx/jenkinsTest.git +refs/heads/*:refs/remotes/origin/* > git rev-parse refs/remotes/origin/master^{commit} # timeout=10 > git rev-parse refs/remotes/origin/origin/master^{commit} # timeout=10 Checking out Revision 1f023f0132273ddc4d3d98a8283e3a15bbe254aa (refs/remotes/origin/master) > git config core.sparsecheckout # timeout=10 > git checkout -f 1f023f0132273ddc4d3d98a8283e3a15bbe254aa > git rev-list 1f023f0132273ddc4d3d98a8283e3a15bbe254aa # timeout=10 [test] $ /bin/sh -xe /Users/ooops/apache-tomcat-7.0.75/temp/hudson6997647762219224773.sh + APP_NAME=jenkinsTest + CODE_SIGN_DISTRIBUTION='iPhone Developer: xxxxx' + project_infoplist_path=./jenkinsTest/Info.plist ++ /usr/libexec/PlistBuddy -c 'print CFBundleShortVersionString' ./jenkinsTest/Info.plist + bundleShortVersion=1.0 ++ /usr/libexec/PlistBuddy -c 'print CFBundleVersion' ./jenkinsTest/Info.plist + bundleVersion=1 ++ date +%Y%m%d + DATE=20170312 + IPANAME=jenkinsTest_V1.0_20170312.ipa + IPA_PATH=/Users/ooops/jenkinsTest_V1.0_20170312.ipa + echo /Users/ooops/jenkinsTest_V1.0_20170312.ipa /Users/ooops/jenkinsTest_V1.0_20170312.ipa + echo /Users/ooops/jenkinsTest_V1.0_20170312.ipa + echo =================clean================= =================clean================= + xcodebuild -target jenkinsTest -configuration Release clean 2017-03-12 12:56:15.278 xcodebuild[12363:1935879] [MT] PluginLoading: Required plug-in compatibility UUID DAxxxD8-C509-4xB-8xx5-84xxxxxxx701 for plug-in at path '~/Library/Application Support/Developer/Shared/Xcode/Plug-ins/VVDocumenter-Xcode.xcplugin' not present in DVTPlugInCompatibilityUUIDs 2017-03-12 12:56:15.279 xcodebuild[12363:1935879] [MT] PluginLoading: Required plug-in compatibility UUID DAxxxD8-C509-4xB-8xx5-84xxxxxxx701 for plug-in at path '~/Library/Application Support/Developer/Shared/Xcode/Plug-ins/HOStringSense.xcplugin' not present in DVTPlugInCompatibilityUUIDs 2017-03-12 12:56:15.280 xcodebuild[12363:1935879] [MT] PluginLoading: Required plug-in compatibility UUID DAxxxD8-C509-4xB-8xx5-84xxxxxxx701 for plug-in at path '~/Library/Application Support/Developer/Shared/Xcode/Plug-ins/ESJsonFormat.xcplugin' not present in DVTPlugInCompatibilityUUIDs 2017-03-12 12:56:15.280 xcodebuild[12363:1935879] [MT] PluginLoading: Required plug-in compatibility UUID DAxxxD8-C509-4xB-8xx5-84xxxxxxx701 for plug-in at path '~/Library/Application Support/Developer/Shared/Xcode/Plug-ins/Auto-Importer.xcplugin' not present in DVTPlugInCompatibilityUUIDs === CLEAN TARGET jenkinsTest OF PROJECT jenkinsTest WITH CONFIGURATION Release === Check dependencies Create product structure /bin/mkdir -p /Users/ooops/.jenkins/workspace/test/build/Release-iphoneos/jenkinsTest.app Clean.Remove clean build/jenkinsTest.build/Release-iphoneos/jenkinsTest.build builtin-rm -rf /Users/ooops/.jenkins/workspace/test/build/jenkinsTest.build/Release-iphoneos/jenkinsTest.build Clean.Remove clean build/Release-iphoneos/jenkinsTest.app builtin-rm -rf /Users/ooops/.jenkins/workspace/test/build/Release-iphoneos/jenkinsTest.app Clean.Remove clean build/Release-iphoneos/jenkinsTest.app.dSYM builtin-rm -rf /Users/ooops/.jenkins/workspace/test/build/Release-iphoneos/jenkinsTest.app.dSYM ** CLEAN SUCCEEDED ** + echo +++++++++++++++++build+++++++++++++++++ +++++++++++++++++build+++++++++++++++++ + xcodebuild -target jenkinsTest -sdk iphoneos -configuration Release 'CODE_SIGN_IDENTITY=iPhone Developer: xxxxxxxxxxxxxxxx' 'SYMROOT=$(PWD)' 2017-03-12 12:56:16.118 xcodebuild[12376:1936105] [MT] PluginLoading: Required plug-in compatibility UUID DAxxxx8-C509-4xxB-8B55-84AxxxxxE701 for plug-in at path '~/Library/Application Support/Developer/Shared/Xcode/Plug-ins/VVDocumenter-Xcode.xcplugin' not present in DVTPlugInCompatibilityUUIDs 2017-03-12 12:56:16.119 xcodebuild[12376:1936105] [MT] PluginLoading: Required plug-in compatibility UUID DAxxxxD8-C509-4D8B-8xxxx-84Axxxx01 for plug-in at path '~/Library/Application Support/Developer/Shared/Xcode/Plug-ins/HOStringSense.xcplugin' not present in DVTPlugInCompatibilityUUIDs 2017-03-12 12:56:16.119 xcodebuild[12376:1936105] [MT] PluginLoading: Required plug-in compatibility UUID DA4xxx8-C509-4Dxx-8xx5-84AxxxE701 for plug-in at path '~/Library/Application Support/Developer/Shared/Xcode/Plug-ins/ESJsonFormat.xcplugin' not present in DVTPlugInCompatibilityUUIDs 2017-03-12 12:56:16.120 xcodebuild[12376:1936105] [MT] PluginLoading: Required plug-in compatibility UUID Dxxxx8-C509-xx-8B55-84xxxxxAE701 for plug-in at path '~/Library/Application Support/Developer/Shared/Xcode/Plug-ins/Auto-Importer.xcplugin' not present in DVTPlugInCompatibilityUUIDs Build settings from command line: CODE_SIGN_IDENTITY = iPhone Developer: qiang zhang (36XGYU49EQ) SDKROOT = iphoneos10.1 SYMROOT = $(PWD) === BUILD TARGET jenkinsTest OF PROJECT jenkinsTest WITH CONFIGURATION Release === Check dependencies Validate Release-iphoneos/jenkinsTest.app cd /Users/ooops/.jenkins/workspace/test export PATH="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/Users/ooops/.rvm/gems/ruby-2.2.2/bin:/Users/ooops/.rvm/gems/ruby-2.2.2@global/bin:/Users/ooops/.rvm/rubies/ruby-2.2.2/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Users/ooops/.rvm/bin:/Users/ooops/.rvm/bin" export PRODUCT_TYPE=com.apple.product-type.application builtin-validationUtility /Users/ooops/.jenkins/workspace/test/Release-iphoneos/jenkinsTest.app -validate-for-store ** BUILD SUCCEEDED ** + xcrun -sdk iphoneos PackageApplication ./Release-iphoneos/jenkinsTest.app -o /Users/ooops/jenkinsTest_V1.0_20170312.ipa warning: PackageApplication is deprecated, use `xcodebuild -exportArchive` instead. //è¿™é‡Œæ˜¯ä¸Šä¼ è’²å…¬è‹±çš„é…ç½®. + uKey=9b0aa78a32........64e1ca68bdbf + apiKey=ac75fcf3..........a47b9f19f2e4b23 ++ cat text.txt + IPA_PATH=/Users/ooops/jenkinsTest_V1.0_20170312.ipa + rm -rf text.txt + echo ++++++++++++++upload+++++++++++++ ++++++++++++++upload+++++++++++++ + curl -F file=@/Users/ooops/jenkinsTest_V1.0_20170312.ipa -F uKey=9b0aa78a32...af26..4e1ca68bdbf -F _api_key=ac75fcf38f2.........19f2e4b23 http://www.pgyer.com/apiv1/app/upload % Total % Received % Xferd Average Speed Time Time Time Current Dload Upload Total Spent Left Speed 0 0 0 0 0 0 0 0 --:--:-- --:--:-- --:--:-- 0 0 0 0 0 0 0 0 0 --:--:-- --:--:-- --:--:-- 0 100 32843 0 0 100 32843 0 21213 0:00:01 0:00:01 --:--:-- 21202 100 32843 0 0 100 32843 0 12862 0:00:02 0:00:02 --:--:-- 12859 100 33438 100 595 100 32843 220 12149 0:00:02 0:00:02 --:--:-- 12146 {"code":0,"message":"","data":{"appKey":"dd580f5...........0305ac671","userKey":"9b0aa78a.........e1ca68bdbf","appType":"1","appIsLastest":"1","appFileSize":"32368","appName":"jenkinsTest","appVersion":"1.0","appVersionNo":"1","appBuildVersion":"2","appIdentifier":"com.ooops.pull","appIcon":"","appDescription":"","appUpdateDescription":"","appScreenshots":"","appShortcutUrl":"nZwg","appCreated":"2017-03-12 12:56:18","appUpdated":"2017-03-12 12:56:18","appQRCodeURL":"http:\/\/static.pgyer.com\/app\/qrcodeHistory\/ea895709d0e57a4a8e4c8f57811838b2ce985322a94f9443e64a0937c6d29e30"}}Finished: SUCCESS ä¸Šä¼ åˆ°è’²å…¬è‹± END]]></content>
      <categories>
        <category>Jenkins</category>
      </categories>
      <tags>
        <tag>Jenkins</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Xcode8æŽ§åˆ¶å°ä¹±ç é—®é¢˜]]></title>
    <url>%2F2016%2F10%2F20%2Fxcode%2F</url>
    <content type="text"><![CDATA[ä¹‹å‰è§£å†³æŽ§åˆ¶å°logè¾“å‡ºçš„æ–¹å¼Xcode8é‡Œè¾¹ Edit Scheme-&gt; Run -&gt; Arguments, åœ¨Environment Variablesé‡Œè¾¹æ·»åŠ  OS_ACTIVITY_MODE ï¼ Disable çŽ¯å¢ƒå˜é‡ ,è¿™ä¸ªç›¸ä¿¡å¤§å®¶éƒ½ä¼š. ä½¿ç”¨æ”¹å˜Xcodeç³»ç»Ÿæ¨¡æ¿çš„æ–¹å¼å…ˆä»‹ç»å‡ ä¸ªcå‡½æ•°12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273/** *getenvï¼ˆå–å¾—çŽ¯å¢ƒå˜é‡å†…å®¹ï¼‰ *å®šä¹‰å‡½æ•° char * getenv(const char *name); *å‡½æ•°è¯´æ˜Ž getenv()ç”¨æ¥å–å¾—å‚æ•°nameçŽ¯å¢ƒå˜é‡çš„å†…å®¹ã€‚ *å‚æ•°è¯´æ˜Ž *nameä¸ºçŽ¯å¢ƒå˜é‡çš„åç§°ï¼Œå¦‚æžœè¯¥å˜é‡å­˜åœ¨åˆ™ä¼šè¿”å›žæŒ‡å‘è¯¥å†…å®¹çš„æŒ‡é’ˆã€‚ *çŽ¯å¢ƒå˜é‡çš„æ ¼å¼ä¸ºnameï¼valueã€‚ *è¿”å›žå€¼ï¼šæ‰§è¡ŒæˆåŠŸåˆ™è¿”å›žæŒ‡å‘è¯¥å†…å®¹çš„æŒ‡é’ˆï¼Œæ‰¾ä¸åˆ°ç¬¦åˆçš„çŽ¯å¢ƒå˜é‡åç§°åˆ™è¿”å›žNULLã€‚ */- (void)getenv_test:(char *)env_name&#123; if(getenv(env_name)) &#123; printf("%s's value = %s",env_name,getenv(env_name)); &#125;&#125;/** *putenvï¼ˆæ”¹å˜æˆ–å¢žåŠ çŽ¯å¢ƒå˜é‡ï¼‰ *å®šä¹‰å‡½æ•° int putenv(const char * string); *å‡½æ•°è¯´æ˜Žï¼šputenv()ç”¨æ¥æ”¹å˜æˆ–å¢žåŠ çŽ¯å¢ƒå˜é‡çš„å†…å®¹ã€‚ *å‚æ•° *stringçš„æ ¼å¼ä¸ºname ï¼ valueï¼Œ *å¦‚æžœè¯¥çŽ¯å¢ƒå˜é‡åŽŸå…ˆå­˜åœ¨ï¼Œåˆ™å˜é‡å†… å®¹ä¼šä¾å‚æ•°stringæ”¹å˜ï¼Œå¦åˆ™æ­¤å‚æ•°å†…å®¹ä¼šæˆä¸ºæ–°çš„çŽ¯å¢ƒå˜é‡ã€‚ *è¿”å›žå€¼ï¼šæ‰§è¡ŒæˆåŠŸåˆ™è¿”å›ž0ï¼Œæœ‰é”™è¯¯å‘ç”Ÿåˆ™è¿”å›ž-1ã€‚ */- (void)putenv_test&#123; char *env_name = "test_two"; if(putenv(env_name) == 0) &#123; printf("%s = %d",env_name,putenv("test_two = two")); &#125; &#125;/** *unsetenvï¼ˆç§»é™¤çŽ¯å¢ƒå˜é‡ï¼‰ *å®šä¹‰å‡½æ•° unsetenv(const char *string); *å‡½æ•°è¯´æ˜Žï¼šunsetenv()ç”¨æ¥æ”¹å˜æˆ–å¢žåŠ çŽ¯å¢ƒå˜é‡çš„å†…å®¹ã€‚ *å‚æ•° *stringä¸ºçŽ¯å¢ƒå˜é‡çš„åç§°ï¼Œ *å¦‚æžœè¯¥çŽ¯å¢ƒå˜é‡åŽŸå…ˆå­˜åœ¨,åˆ™ç§»é™¤è¯¥çŽ¯å¢ƒå˜é‡ã€‚ *è¿”å›žå€¼ï¼šæ‰§è¡ŒæˆåŠŸåˆ™è¿”å›ž0ï¼Œæœ‰é”™è¯¯å‘ç”Ÿåˆ™è¿”å›ž-1ã€‚ */- (void)unsetenv_test&#123; char *env_name = "test_one"; if(unsetenv(env_name) == 0) &#123; printf("%s is unseted = %s",env_name,unsetenv(env_name) == 0 ? "yes" : "no"); &#125;&#125;/**setenvï¼ˆæ”¹å˜æˆ–å¢žåŠ çŽ¯å¢ƒå˜é‡ï¼‰ *å®šä¹‰å‡½æ•° int setenv(const char *name,const char * value,int overwrite); *å‡½æ•°è¯´æ˜Ž setenv()ç”¨æ¥æ”¹å˜æˆ–å¢žåŠ çŽ¯å¢ƒå˜é‡çš„å†…å®¹ã€‚ *å‚æ•° nameä¸ºçŽ¯å¢ƒå˜é‡åç§°å­—ç¬¦ä¸²ã€‚ *å‚æ•° valueåˆ™ä¸ºå˜é‡å†…å®¹ã€‚ *å‚æ•° overwriteç”¨æ¥å†³å®šæ˜¯å¦è¦æ”¹å˜å·²å­˜åœ¨çš„çŽ¯å¢ƒå˜é‡ã€‚ å¦‚æžœoverwriteä¸ä¸º0ï¼Œåˆ™æ”¹å˜çŽ¯å¢ƒå˜é‡åŽŸæœ‰å†…å®¹ï¼ŒåŽŸæœ‰å†…å®¹ä¼šè¢«æ”¹ä¸ºå‚æ•°valueæ‰€æŒ‡çš„å˜é‡å†…å®¹ã€‚ å¦‚æžœoverwriteä¸º0ï¼Œä¸”è¯¥çŽ¯å¢ƒå˜é‡å·²æœ‰å†…å®¹ï¼Œåˆ™å‚æ•°valueä¼šè¢«å¿½ç•¥ã€‚ *è¿”å›žå€¼ æ‰§è¡ŒæˆåŠŸåˆ™è¿”å›ž0ï¼Œæœ‰é”™è¯¯å‘ç”Ÿæ—¶è¿”å›ž-1*/- (void)setenv_test&#123; char *env_name = "test_one"; char *env_value = "ooops"; if(setenv(env_name,env_value,1) == 0) &#123; printf("%s is seted = %s",env_name,setenv(env_name,env_value,1) == 0 ? "success" : "failed"); &#125;&#125; æˆ‘ä»¬è¦ä¿®æ”¹çš„æ¨¡æ¿å¦‚ä¸‹çš„è·¯å¾„ä¸­12/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/Xcode/Templates/Project\ Templates/iOS/Application/Cocoa\ Touch\ Application\ Base.xctemplate æ‰“å¼€æ–‡ä»¶,åœ¨æ–‡ä»¶ä¸­æœç´¢å¦‚ä¸‹ä»£ç 12345&lt;key&gt;main.m:main:UIApplicationMain&lt;/key&gt;&lt;string&gt;@autoreleasepool &#123; return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));&#125;&lt;/string&gt; å°†å…¶æ”¹ä¸º12345678&lt;key&gt;main.m:main:UIApplicationMain&lt;/key&gt; &lt;string&gt;@autoreleasepool &#123; /* * æ­¤è¡Œä»£ç æ˜¯å¢žåŠ çš„ä»£ç  */ setenv("OS_ACTIVITY_MODE", "DISABLE", 1); return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));&#125; å…¶ç›®çš„æ˜¯ä¸ºäº†,åœ¨åˆ›å»ºçš„Xcodeé¡¹ç›®çš„å…¥å£æ–‡ä»¶ä¸­å¢žåŠ æ·»åŠ çŽ¯å¢ƒå˜é‡çš„æ“ä½œ æ•ˆæžœå¦‚ä¸‹12345678910111213141516171819//// main.m// environment_variable//// Created by å¼ å¼º on 16/10/20.// Copyright Â© 2016å¹´ å¼ å¼º. All rights reserved.//#import &lt;UIKit/UIKit.h&gt;#import "AppDelegate.h"int main(int argc, char * argv[]) &#123; @autoreleasepool &#123; setenv("OS_ACTIVITY_MODE", "disable", 1); return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); &#125;&#125; è‡³æ­¤è§£å†³Xcode8åˆ›å»ºæ–°é¡¹ç›®,æŽ§åˆ¶å°ä¼šå‡ºçŽ°å¥‡è‘©logçš„å°ç¼ºé™·!]]></content>
      <categories>
        <category>Xcode 8</category>
      </categories>
      <tags>
        <tag>æ‚è°ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[blog ä¼Šå§‹]]></title>
    <url>%2F2015%2F06%2F11%2Fblog-initial-construction%2F</url>
    <content type="text"><![CDATA[æ¥æ¥æ¥, å†™ä¸€ç¯‡æ¯ä¸ªç¨‹åºå‘˜éƒ½ä¼šå†™çš„ Hello World, è®°å½•ä¸€ä¸‹ blog çš„å¼€é€š. ä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜, æ˜¯åº”è¯¥å€’è…¾å€’è…¾è‡ªå·±çš„Blog, äºŽæ˜¯ä¹Žå°±å¼€å§‹äº†æ’¸èµ·è¢–å­å¹²äº†.]]></content>
      <categories>
        <category>ä¼Šå§‹</category>
      </categories>
      <tags>
        <tag>å‘³</tag>
      </tags>
  </entry>
</search>
